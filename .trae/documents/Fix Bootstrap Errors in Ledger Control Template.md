## Goal
تصحيح كل أخطاء Bootstrap في قالب Ledger Control وجعله يعمل بلا تعارضات، مع تبويبات ومودالات تعمل بشكل موثوق.

## خيار موصى به (Bootstrap 4 – توافق كامل مع المشروع)
1. توحيد التبويبات على BS4:
   - استخدام `<a class="nav-link" data-toggle="pill" href="#tab-...">` للتبويبات الرئيسية.
   - استخدام `<a class="nav-link" data-toggle="tab" href="#ops-...">` للتبويبات الفرعية داخل مركز التحكم.
   - ضبط `aria-controls/role` وفق BS4.
2. توحيد المودالات على BS4:
   - أزرار الإغلاق: عنصر `button.close` مع `data-dismiss="modal"`.
   - فتح/إغلاق عبر jQuery: `$('#modalId').modal('show'/'hide')`.
3. تنظيف الجافاسكربت:
   - إزالة أي استدعاءات لواجهات BS5 مثل `bootstrap.Modal.getOrCreateInstance`.
   - استخدام jQuery `.tab('show')` لأحداث التبويب، مع fallback يدوي عند غياب jQuery.
4. معالجة التمرير السلس:
   - تجاهل روابط التبويبات في منطق التمرير السلس حتى لا يمنع تفعيل BS4.
5. معالجة الكاش:
   - منع Service Worker من التحكم بصفحات الأمن، ومسح Cache Storage عند الدخول للقالب لأول تشغيل بعد التعديل.
6. اختبار شامل:
   - التبويبات: التنقل بين جميع التبويبات والفرعية يعمل.
   - المودالات: "إضافة حساب" و"تعديل حساب" تعمل وتغلق بشكل صحيح.
   - الجداول: عرض بيانات الحسابات/القيود/الباتشات مع حالات انتظار وأخطاء واضحة.

## خيار بديل (Bootstrap 5 – إن رغبت بترقية هذا القالب فقط)
1. تحويل كل markup إلى BS5:
   - تبويبات: `button.nav-link` مع `data-bs-toggle` و`data-bs-target`.
   - مودالات: `btn-close` و`data-bs-dismiss="modal"`.
2. تهيئة عبر BS5 API:
   - `new bootstrap.Tab(el).show()`، و`new bootstrap.Modal(el)`.
3. إزالة اعتماد jQuery من القالب.
4. تضمين `bootstrap.bundle.min.js` داخل هذا القالب فقط عبر كتلة `extra_js`.
5. التحذير: وجود AdminLTE/BS4 عالمياً قد يسبب تعارضات؛ سنعزل التهيئة داخل القالب ونمنع استدعاءات BS4 على عناصره.
6. اختبار شامل مماثل.

## توصية
بما أن المشروع يحمل Bootstrap 4 عبر AdminLTE في القالب الأساسي، الخيار (BS4) هو الأكثر أماناً وتوافقاً. إذا رغبت بترقية هذا القالب إلى BS5، سنطبّق العزل والتهيئة الخاصة داخل القالب مع تحذير من تعارضات محتملة.

هل تريد المضي بالخيار الموصى به (Bootstrap 4) أم البديل (Bootstrap 5)؟