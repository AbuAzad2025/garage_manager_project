{% extends 'base.html' %}
{% block title %}فلتر متقدّم{% endblock %}
{% block breadcrumb %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb bg-white px-3 py-2 rounded mb-4">
    <li class="breadcrumb-item"><a href="{{ url_for('customers.list_customers') }}">العملاء</a></li>
    <li class="breadcrumb-item active">فلتر متقدّم</li>
  </ol>
</nav>
{% endblock %}
{% block content %}
<div class="card shadow-sm">
  <div class="card-header bg-primary text-white">
    <h3 class="card-title"><i class="fas fa-filter me-2"></i>فلتر متقدّم</h3>
  </div>
  <div class="card-body">
    <form id="customer-adv-search" class="row g-3 mb-4">
      {% for field,label,placeholder in [
          ('balance_min','رصيد أدنى','0'),
          ('balance_max','رصيد أقصى','0'),
          ('created_at_min','تاريخ إنشاء من','YYYY-MM-DD'),
          ('created_at_max','تاريخ إنشاء إلى','YYYY-MM-DD'),
          ('last_activity_min','آخر نشاط من','YYYY-MM-DD'),
          ('last_activity_max','آخر نشاط إلى','YYYY-MM-DD'),
        ] %}
      <div class="col-md-4">
        <label class="form-label fw-bold">{{ label }}</label>
        <input type="date" name="{{ field }}"
               value="{{ request.args.get(field,'') }}"
               class="form-control" placeholder="{{ placeholder }}">
      </div>
      {% endfor %}
      <div class="col-md-4 d-flex gap-2">
        <button type="submit" class="btn btn-primary w-100">تطبيق</button>
        <button type="reset" class="btn btn-secondary w-100">إعادة</button>
      </div>
      <div class="col-md-4">
        <button id="export-results" class="btn btn-outline-success w-100">
          تصدير CSV
        </button>
      </div>
    </form>

    {% include 'customers/_table.html' %}

    {% if pagination.pages>1 %}
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center mt-4">
        <!-- pagination items as in list.html -->
      </ul>
    </nav>
    {% endif %}
  </div>
</div>
{% endblock %}
