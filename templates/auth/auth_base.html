<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}تسجيل الدخول - Azad{% endblock %}</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
  {% block head %}{% endblock %}
</head>
<body data-auth-bg="{{ url_for('static', filename='img/azad_login_bg.webp') }}">

  <!-- Enhanced Navbar - Optimized & Organized -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
    <div class="container">
      <a class="navbar-brand fw-bold" href="{{ url_for('auth.login') }}">
        <i class="fas fa-building me-2"></i>
        شركة أزاد للأنظمة الذكية
      </a>
      
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('user_guide.index') }}" target="_blank">
              <i class="fas fa-star me-1"></i> المميزات
              <span class="badge bg-success ms-1">40+</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('pricing.index') }}" target="_blank">
              <i class="fas fa-tags me-1"></i> الأسعار
              <span class="badge bg-warning text-dark ms-1">من $500</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('other_systems.index') }}" target="_blank">
              <i class="fas fa-cogs me-1"></i> أنظمة أخرى
              <span class="badge bg-info ms-1">4</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('shop.catalog') }}">
              <i class="fas fa-store me-1"></i> المتجر
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://wa.me/970562150193?text=أحتاج%20للمساعدة" target="_blank">
              <i class="fab fa-whatsapp me-1"></i> دعم فوري
            </a>
          </li>
        </ul>
        
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link fw-semibold" href="{{ url_for('auth.login') }}">
              <i class="fas fa-sign-in-alt me-1"></i> دخول
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link btn text-white fw-bold ms-2 px-4 py-2" 
               style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); border-radius: 25px;"
               href="{{ url_for('auth.customer_register') }}">
              <i class="fas fa-rocket me-1"></i> ابدأ مجاناً
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h5 class="text-white mb-0">
        <i class="fas fa-building me-2"></i>
        شركة ازاد للأنظمة الذكية
      </h5>
      <button class="sidebar-close" onclick="toggleSidebar()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="sidebar-content">
      <div class="sidebar-section">
        <h6 class="sidebar-title">🚀 ابدأ الآن</h6>
        <ul class="sidebar-menu">
          <li><a href="{{ url_for('auth.login') }}"><i class="fas fa-sign-in-alt"></i> تسجيل الدخول</a></li>
          <li><a href="{{ url_for('auth.customer_register') }}"><i class="fas fa-user-plus"></i> إنشاء حساب مجاني</a></li>
          <li><a href="{{ url_for('shop.catalog') }}"><i class="fas fa-store"></i> تصفح المتجر</a></li>
        </ul>
      </div>
      
      <div class="sidebar-section">
        <h6 class="sidebar-title">📚 تعرف علينا</h6>
        <ul class="sidebar-menu">
          <li><a href="{{ url_for('user_guide.index') }}"><i class="fas fa-star"></i> المميزات (40+ وحدة)</a></li>
          <li><a href="{{ url_for('pricing.index') }}"><i class="fas fa-tags"></i> الأسعار (من $500/سنة)</a></li>
          <li><a href="{{ url_for('other_systems.index') }}"><i class="fas fa-cogs"></i> أنظمتنا الأخرى (4 أنظمة)</a></li>
        </ul>
      </div>
      
      <div class="sidebar-section">
        <h6 class="sidebar-title">📞 تواصل معنا</h6>
        <ul class="sidebar-menu">
          <li><a href="https://wa.me/970562150193?text=مرحباً، أحتاج للمساعدة" target="_blank"><i class="fab fa-whatsapp"></i> واتساب (فوري)</a></li>
          <li><a href="tel:+970562150193"><i class="fas fa-phone"></i> +970-562-150-193</a></li>
          <li><a href="mailto:ahmed@azad-systems.com"><i class="fas fa-envelope"></i> ahmed@azad-systems.com</a></li>
        </ul>
      </div>
    </div>
    
    <div class="sidebar-footer">
      <div class="contact-info text-center">
        <div class="mb-3">
          <div class="badge bg-success mb-2">
            <i class="fas fa-rocket me-1"></i> نظام احترافي 100%
          </div>
          <div class="small">
            <strong>40+</strong> وحدة •
            <strong>133</strong> API •
            <strong>89</strong> فهرس
          </div>
        </div>
        <p class="mb-2 fw-bold"><i class="fas fa-map-marker-alt me-1"></i> رام الله - فلسطين 🇵🇸</p>
        <p class="mb-1"><i class="fas fa-phone me-1"></i> +970-562-150-193</p>
        <p class="mb-0"><i class="fab fa-whatsapp me-1"></i> دعم فوري 24/7</p>
      </div>
    </div>
  </div>

  <!-- Sidebar Toggle Button -->
  <button class="sidebar-toggle" onclick="toggleSidebar()">
    <i class="fas fa-bars"></i>
  </button>

  <div class="auth-overlay"></div>

  <main class="auth-container">
    <img src="{{ url_for('static', filename='img/azad_logo.png') }}" class="auth-logo" alt="Azad Logo">
    <h3 class="auth-title">{% block title_text %}{% endblock %}</h3>
    {% block content %}{% endblock %}
  </main>

  <!-- Compact Fixed Footer -->
  <footer class="footer-compact" style="padding: 0.75rem 0; background: rgba(0, 0, 0, 0.85);">
    <div class="container">
      <div class="row align-items-center g-2">
        <div class="col-md-4 text-center text-md-start">
          <p class="mb-0 text-light small">
            &copy; {{ now().year }} شركة أزاد للأنظمة الذكية
          </p>
        </div>
        <div class="col-md-4 text-center">
          <a href="https://wa.me/970562150193?text=مرحباً" class="btn btn-success btn-sm me-1" target="_blank">
            <i class="fab fa-whatsapp"></i> 0562150193
          </a>
          <a href="tel:+970562150193" class="btn btn-outline-light btn-sm">
            <i class="fas fa-phone"></i> اتصل
          </a>
        </div>
        <div class="col-md-4 text-center text-md-end">
          <p class="mb-0 text-light small">
            <i class="fas fa-map-marker-alt"></i> رام الله 🇵🇸 | <i class="fas fa-code"></i> أحمد غنام
          </p>
        </div>
      </div>
    </div>
  </footer>

  <!-- jQuery و Bootstrap محمّلين من AdminLTE -->
  <script src="{{ url_for('static', filename='adminlte/plugins/jquery/jquery.min.js') }}"></script>
  <script src="{{ url_for('static', filename='adminlte/plugins/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
  <script>
    (function(){
      var body = document.body;
      var bg = body && body.getAttribute('data-auth-bg');
      if(bg){
        body.style.backgroundImage = 'url(' + bg + ')';
        body.style.backgroundSize = 'cover';
        body.style.backgroundPosition = 'center';
        body.style.backgroundAttachment = 'fixed';
      }
    })();
    
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('active');
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
    
    document.addEventListener('click', function(e) {
      const sidebar = document.getElementById('sidebar');
      const toggleBtn = document.querySelector('.sidebar-toggle');
      
      if (!sidebar.contains(e.target) && !toggleBtn.contains(e.target)) {
        sidebar.classList.remove('active');
      }
    });

    document.querySelectorAll('form').forEach(function(form) {
      form.addEventListener('submit', function(e) {
        const submitBtn = this.querySelector('button[type="submit"], input[type="submit"]');
        if (submitBtn && !submitBtn.disabled) {
          submitBtn.disabled = true;
          const originalText = submitBtn.innerHTML || submitBtn.value;
          if (submitBtn.tagName === 'BUTTON') {
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> جارٍ المعالجة...';
          }
          setTimeout(function() {
            submitBtn.disabled = false;
            if (submitBtn.tagName === 'BUTTON') {
              submitBtn.innerHTML = originalText;
            }
          }, 3000);
        }
      });
    });

    const alerts = document.querySelectorAll('.alert');
    alerts.forEach(function(alert) {
      setTimeout(function() {
        if (alert && alert.classList.contains('alert-success')) {
          const bsAlert = new bootstrap.Alert(alert);
          bsAlert.close();
        }
      }, 5000);
    });
  </script>
  {% block scripts %}{% endblock %}
</body>
</html>
