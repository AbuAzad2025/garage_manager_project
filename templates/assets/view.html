{% extends 'base.html' %}
{% block title %}Ø¹Ø±Ø¶ Ø§Ù„Ø£ØµÙ„ - {{ asset.asset_number }}{% endblock %}
{% block page_title %}ğŸ¢ {{ asset.name }}{% endblock %}

{% block content %}
<div class="container-fluid">
  
  <div class="row mb-4">
    <div class="col-md-3">
      <div class="card border-0 shadow-sm">
        <div class="card-body text-center">
          <h6 class="text-muted">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</h6>
          <h4>{{ "{:,.2f}".format(asset.purchase_price) }} â‚ª</h4>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 shadow-sm">
        <div class="card-body text-center">
          <h6 class="text-muted">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¯ÙØªØ±ÙŠØ©</h6>
          <h4 class="text-success">{{ "{:,.2f}".format(book_value) }} â‚ª</h4>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 shadow-sm">
        <div class="card-body text-center">
          <h6 class="text-muted">Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ù…ØªØ±Ø§ÙƒÙ…</h6>
          <h4 class="text-danger">{{ "{:,.2f}".format(total_depreciation) }} â‚ª</h4>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 shadow-sm">
        <div class="card-body text-center">
          <h6 class="text-muted">Ø§Ù„Ø­Ø§Ù„Ø©</h6>
          <h4>
            {% if asset.status == 'ACTIVE' %}
            <span class="badge bg-success">Ù†Ø´Ø·</span>
            {% else %}
            <span class="badge bg-secondary">{{ asset.status }}</span>
            {% endif %}
          </h4>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="card border-0 shadow-sm mb-4">
        <div class="card-header">
          <h5 class="mb-0">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£ØµÙ„</h5>
        </div>
        <div class="card-body">
          <table class="table table-sm">
            <tr>
              <th>Ø±Ù‚Ù… Ø§Ù„Ø£ØµÙ„:</th>
              <td>{{ asset.asset_number }}</td>
            </tr>
            <tr>
              <th>Ø§Ù„ØªØµÙ†ÙŠÙ:</th>
              <td>{{ asset.category.name }}</td>
            </tr>
            <tr>
              <th>Ø§Ù„ÙØ±Ø¹:</th>
              <td>{{ asset.branch.name if asset.branch else '-' }}</td>
            </tr>
            <tr>
              <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø´Ø±Ø§Ø¡:</th>
              <td>{{ asset.purchase_date.strftime('%Y-%m-%d') }}</td>
            </tr>
            <tr>
              <th>Ø§Ù„Ù…ÙˆØ±Ø¯:</th>
              <td>{{ asset.supplier.name if asset.supplier else '-' }}</td>
            </tr>
            <tr>
              <th>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ:</th>
              <td>{{ asset.serial_number or '-' }}</td>
            </tr>
            <tr>
              <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</th>
              <td>{{ asset.location or '-' }}</td>
            </tr>
          </table>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card border-0 shadow-sm mb-4">
        <div class="card-header">
          <h5 class="mb-0">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ</h5>
        </div>
        <div class="card-body" style="max-height: 300px; overflow-y: auto;">
          <table class="table table-sm table-hover">
            <thead>
              <tr>
                <th>Ø§Ù„Ø³Ù†Ø©</th>
                <th>Ø§Ù„Ø´Ù‡Ø±</th>
                <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                <th>Ø§Ù„Ù…ØªØ±Ø§ÙƒÙ…</th>
              </tr>
            </thead>
            <tbody>
              {% for dep in depreciations %}
              <tr>
                <td>{{ dep.fiscal_year }}</td>
                <td>{{ dep.fiscal_month or '-' }}</td>
                <td>{{ "{:,.2f}".format(dep.depreciation_amount) }}</td>
                <td>{{ "{:,.2f}".format(dep.accumulated_depreciation) }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="card border-0 shadow-sm">
        <div class="card-header">
          <h5 class="mb-0">Ø³Ø¬Ù„ Ø§Ù„ØµÙŠØ§Ù†Ø©</h5>
        </div>
        <div class="card-body">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                <th>Ø§Ù„Ù†ÙˆØ¹</th>
                <th>Ø§Ù„ØªÙƒÙ„ÙØ©</th>
                <th>Ø§Ù„ÙˆØµÙ</th>
                <th>Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</th>
              </tr>
            </thead>
            <tbody>
              {% for maint in maintenance_records %}
              <tr>
                <td>{{ maint.maintenance_date.strftime('%Y-%m-%d') }}</td>
                <td>{{ maint.maintenance_type or '-' }}</td>
                <td>{{ "{:,.2f}".format(maint.cost) }} â‚ª</td>
                <td>{{ maint.description or '-' }}</td>
                <td>{{ maint.next_maintenance_date.strftime('%Y-%m-%d') if maint.next_maintenance_date else '-' }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-3">
    <a href="{{ url_for('assets.index') }}" class="btn btn-secondary">
      <i class="fas fa-arrow-left"></i> Ø±Ø¬ÙˆØ¹
    </a>
  </div>

</div>
{% endblock %}

