{% extends 'base.html' %}
{% block title %}ุชุญููู ุงูุงูุญุฑุงูุงุช{% endblock %}
{% block page_title %}๐ ุชุญููู ุงูุญุฑุงูุงุช ุงูููุฒุงููุฉ - {{ fiscal_year }}{% endblock %}

{% block content %}
<div class="container-fluid">
  
  <div class="card border-0 shadow-sm">
    <div class="card-body">
      <table class="table table-hover table-bordered">
        <thead class="table-light">
          <tr>
            <th>ุงูุญุณุงุจ</th>
            <th>ุงููุฑุน</th>
            <th>ุงููุฎุตุต</th>
            <th>ุงููุตุฑูู ุงููุนูู</th>
            <th>ุงูุงูุญุฑุงู (โช)</th>
            <th>ุงูุงูุญุฑุงู (%)</th>
            <th>ุงูุญุงูุฉ</th>
          </tr>
        </thead>
        <tbody>
          {% for row in data %}
          <tr class="{% if row.status == 'over' %}table-danger{% else %}table-success{% endif %}">
            <td>{{ row.account.name }}</td>
            <td>{{ row.branch.name if row.branch else 'ุนุงู' }}</td>
            <td>{{ "{:,.2f}".format(row.allocated) }}</td>
            <td>{{ "{:,.2f}".format(row.actual) }}</td>
            <td>{{ "{:,.2f}".format(row.variance) }}</td>
            <td>{{ "{:.1f}".format(row.variance_pct) }}%</td>
            <td>
              {% if row.status == 'over' %}
              <span class="badge bg-danger">ุชุฌุงูุฒ</span>
              {% else %}
              <span class="badge bg-success">ุชูููุฑ</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

</div>
{% endblock %}

