{% extends "base_print.html" %}
{% block title %}Ø¥ÙŠØµØ§Ù„ ØµÙŠØ§Ù†Ø©{% endblock %}

{% block head_extra %}
{% set STATUS_LABELS = {'PENDING':'Ù…Ø¹Ù„Ù‚','DIAGNOSIS':'ØªØ´Ø®ÙŠØµ','IN_PROGRESS':'Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°','COMPLETED':'Ù…ÙƒØªÙ…Ù„','CANCELLED':'Ù…Ù„ØºÙŠ','ON_HOLD':'Ù…Ø¤Ø¬Ù„'} %}
{% set is_simple = (variant == 'simple') %}
<style>
@page { size:A4 portrait; margin:14mm 14mm 18mm 14mm; }
html,body{font-family:"DejaVu Sans","Amiri","Tahoma","Arial",sans-serif;direction:rtl;text-align:right;font-size:13px;line-height:1.55;background:#fff;color:#111;margin:0;padding:0;-webkit-print-color-adjust:exact;print-color-adjust:exact;}
#receipt{max-width:820px;margin:0 auto;padding:18mm 12mm 16mm 12mm;}
{% if is_simple %}
.simple-header{text-align:center;border-bottom:2px solid #1d273b;padding-bottom:12px;margin-bottom:18px;}
.simple-header h2{font-size:20px;font-weight:800;margin:0 0 6px 0;color:#1d273b;}
.simple-header .subtitle{font-size:12px;color:#555;margin:0;}
.meta-grid{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:18px;font-size:11px;}
.meta-box{flex:1;min-width:160px;border:1px solid #c9ced7;border-radius:8px;padding:10px 12px;background:#f7f9fc;}
.meta-label{display:block;font-size:10px;color:#69748c;text-transform:uppercase;letter-spacing:.6px;margin-bottom:4px;}
.meta-value{font-size:13px;font-weight:700;color:#1d273b;}
.section{border:1px solid #d4d9e2;border-radius:10px;padding:14px 16px;margin-bottom:16px;background:#fff;}
.section-title{font-size:13px;font-weight:700;color:#1d273b;margin-bottom:10px;}
.info-row{display:flex;gap:8px;font-size:12px;padding:4px 0;}
.info-label{min-width:80px;color:#5a647a;font-weight:600;}
.info-value{flex:1;color:#111;}
.table{width:100%;border-collapse:collapse;margin-top:10px;}
.table th,.table td{border:1px solid #d4d9e2;padding:8px 10px;font-size:11px;}
.table thead th{background:#eef1f7;color:#1d273b;font-weight:700;}
.totals{max-width:360px;margin:18px 0 0 auto;border:1px solid #d4d9e2;border-radius:10px;padding:14px 16px;background:#f6f8fb;}
.totals-row{display:flex;justify-content:space-between;font-size:12px;padding:6px 0;}
.totals-row.final{border-top:1px solid #ccd3df;margin-top:8px;padding-top:10px;font-size:14px;font-weight:800;color:#1d273b;}
.signatures{display:flex;gap:28px;margin-top:32px;}
.sign-slot{flex:1;text-align:center;}
.sign-line{border-top:1px solid #1d273b;margin-bottom:8px;padding-top:46px;}
{% else %}
.hero{display:flex;justify-content:space-between;align-items:flex-start;gap:18px;background:linear-gradient(135deg,#071435,#102a60);color:#fff;padding:24px 26px;border-radius:18px;box-shadow:0 16px 34px rgba(7,20,53,.28);}
.hero-brand{display:flex;align-items:center;gap:18px;}
.hero-logo{width:60px;height:60px;border-radius:14px;background:rgba(255,255,255,.12);display:flex;align-items:center;justify-content:center;overflow:hidden;}
.hero-logo img{max-width:46px;max-height:46px;display:block;}
.hero-text{display:flex;flex-direction:column;gap:6px;}
.hero-name{font-size:19px;font-weight:800;letter-spacing:.4px;}
.hero-sub{font-size:11px;text-transform:uppercase;letter-spacing:1px;opacity:.82;}
.hero-meta{display:grid;gap:10px;min-width:220px;}
.meta-item{background:rgba(255,255,255,.14);border-radius:12px;padding:11px 14px;display:flex;flex-direction:column;}
.meta-label{font-size:10px;opacity:.72;letter-spacing:.6px;text-transform:uppercase;}
.meta-value{font-size:14px;font-weight:700;margin-top:4px;}
.summary-strip{display:flex;flex-wrap:wrap;gap:14px;margin:20px 0;}
.summary-pill{flex:1;min-width:200px;border-radius:16px;background:linear-gradient(135deg,#132c6b,#255ac6);color:#fff;padding:18px 20px;box-shadow:0 16px 30px rgba(19,44,107,.24);display:flex;flex-direction:column;gap:6px;}
.summary-label{font-size:12px;opacity:.85;letter-spacing:.6px;}
.summary-value{font-size:22px;font-weight:800;}
.summary-meta{font-size:11px;opacity:.78;}
.section{border-radius:16px;padding:18px 22px;border:1px solid rgba(12,29,71,.14);background:#fff;box-shadow:0 22px 42px rgba(12,29,71,.08);margin-bottom:18px;}
.section-title{font-size:15px;font-weight:800;color:#111f46;display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;}
.badge-chip{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:999px;background:rgba(15,33,82,.08);color:#0f2152;font-size:11px;font-weight:700;}
.info-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));}
.data-card{border:1px solid rgba(15,33,82,.14);border-radius:14px;padding:16px;background:linear-gradient(140deg,#f8faff,#eef2ff);display:flex;flex-direction:column;gap:6px;}
.data-label{font-size:11px;letter-spacing:.6px;color:#41507a;text-transform:uppercase;}
.data-value{font-size:17px;font-weight:800;color:#0f2152;}
.table{width:100%;border-collapse:collapse;margin-top:12px;}
.table thead th{background:#0c1f4a;color:#fff;border:0;font-size:12px;padding:10px 12px;text-align:center;}
.table td,.table th{padding:10px 12px;border-bottom:1px solid rgba(15,33,82,.1);font-size:12px;}
.table tbody td{background:#fbfdff;}
.table tfoot td,.table tfoot th{background:rgba(12,29,71,.08);font-weight:800;}
.totals{max-width:380px;margin:20px 0 0 auto;border-radius:16px;padding:18px 20px;background:linear-gradient(160deg,#0d2153,#173d8a);color:#fff;box-shadow:0 18px 28px rgba(13,33,83,.32);}
.totals-row{display:flex;justify-content:space-between;padding:8px 0;font-size:13px;}
.totals-row.final{border-top:1px solid rgba(255,255,255,.4);margin-top:10px;padding-top:12px;font-size:18px;font-weight:800;}
.signatures{display:flex;gap:32px;margin-top:34px;}
.sign-slot{flex:1;text-align:center;}
.sign-line{border-top:2px dashed rgba(13,33,83,.5);margin-bottom:10px;padding-top:52px;}
.footer{margin-top:26px;text-align:center;font-size:11px;color:#44507c;}
{% endif %}
.no-print{margin-top:20px;text-align:center;}
.switcher{display:inline-flex;align-items:center;gap:10px;}
.switcher a{display:inline-flex;align-items:center;justify-content:center;padding:10px 18px;border-radius:28px;font-size:12px;font-weight:700;text-decoration:none;}
.switcher a.active{background:#0d1f4a;color:#fff;}
.switcher a:not(.active){background:#e7eaf3;color:#1d273b;}
.print-btn{padding:12px 24px;border-radius:30px;border:0;background:#0d1f4a;color:#fff;font-size:13px;font-weight:700;margin:0 8px;cursor:pointer;}
.back-btn{padding:12px 24px;border-radius:30px;border:0;background:#e7eaf3;color:#1d273b;font-size:13px;font-weight:700;margin:0 8px;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;}
.table .num{text-align:end;font-variant-numeric:tabular-nums;}
.wrap{word-break:break-word;}
@media print{.no-print{display:none!important;}body{background:#fff;}}
</style>
{% endblock %}

{% block content %}
{% set st = (service.status.value if service.status and service.status is not string else service.status) %}
{% set status_label = STATUS_LABELS.get((st or '')|upper, st or 'â€”') %}
{% set ns = namespace(gross_total=0.0, items_discount=0.0, net_total=0.0) %}
{% for part in (service.parts or []) %}
  {% set qty = (part.quantity or 0)|float %}
  {% set price = (part.unit_price or 0)|float %}
  {% set disc = (part.discount or 0)|float %}
  {% set gross = qty * price %}
  {% set net = gross - disc %}
  {% set ns.gross_total = ns.gross_total + gross %}
  {% set ns.items_discount = ns.items_discount + disc %}
  {% set ns.net_total = ns.net_total + net %}
{% endfor %}
{% for task in (service.tasks or []) %}
  {% set qty = (task.quantity or 0)|float %}
  {% set price = (task.unit_price or 0)|float %}
  {% set disc = (task.discount or 0)|float %}
  {% set gross = qty * price %}
  {% set net = gross - disc %}
  {% set ns.gross_total = ns.gross_total + gross %}
  {% set ns.items_discount = ns.items_discount + disc %}
  {% set ns.net_total = ns.net_total + net %}
{% endfor %}
{% set global_discount = (service.discount_total or 0)|float %}
{% set subtotal_after_all_disc = ns.net_total - global_discount %}
{% set tax_rate = (service.tax_rate or 0)|float %}
{% set tax_amount = subtotal_after_all_disc * (tax_rate/100.0) %}
{% set grand_total = subtotal_after_all_disc + tax_amount %}

<div id="receipt">
  {% if is_simple %}
    <div class="simple-header">
      <h2>Ø¥ÙŠØµØ§Ù„ ØµÙŠØ§Ù†Ø©</h2>
      <p class="subtitle">Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨</p>
    </div>
    <div class="meta-grid">
      <div class="meta-box">
        <span class="meta-label">Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</span>
        <span class="meta-value">{{ service.service_number or ('SRV-' ~ service.id) }}</span>
      </div>
      <div class="meta-box">
        <span class="meta-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</span>
        <span class="meta-value">{{ service.received_at.strftime('%Y-%m-%d') if service.received_at else 'â€”' }}</span>
      </div>
      <div class="meta-box">
        <span class="meta-label">Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</span>
        <span class="meta-value">{{ status_label }}</span>
      </div>
    </div>
  {% else %}
    <div class="hero">
      <div class="hero-brand">
        <div class="hero-logo">
          <img src="{{ url_for('static', filename='img/logo.png') }}" alt="" onerror="this.closest('.hero-logo').style.display='none'">
        </div>
        <div class="hero-text">
          <div class="hero-name">{{ system_settings.company_name or 'Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„ÙÙ„Ø³Ø·ÙŠÙ†ÙŠ Ù„Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ø«Ù‚ÙŠÙ„Ø©' }}</div>
          <div class="hero-sub">Service Receipt</div>
        </div>
      </div>
      <div class="hero-meta">
        <div class="meta-item">
          <span class="meta-label">Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</span>
          <span class="meta-value">{{ service.service_number or ('SRV-' ~ service.id) }}</span>
        </div>
        <div class="meta-item">
          <span class="meta-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</span>
          <span class="meta-value">{{ service.received_at.strftime('%Y-%m-%d') if service.received_at else 'â€”' }}</span>
        </div>
        <div class="meta-item">
          <span class="meta-label">Ø§Ù„Ø­Ø§Ù„Ø©</span>
          <span class="meta-value">{{ status_label }}</span>
        </div>
      </div>
    </div>
    <div class="summary-strip">
      <div class="summary-pill">
        <span class="summary-label">Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ù…Ù„</span>
        <span class="summary-value">{{ '%.2f'|format(ns.gross_total) }} {{ service.currency or 'â‚ª' }}</span>
        <span class="summary-meta">Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø³ÙˆÙ…Ø§Øª</span>
      </div>
      <div class="summary-pill">
        <span class="summary-label">Ø§Ù„Ø­Ø³ÙˆÙ…Ø§Øª</span>
        <span class="summary-value">{{ '%.2f'|format(ns.items_discount + global_discount) }} {{ service.currency or 'â‚ª' }}</span>
        <span class="summary-meta">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ù†ÙˆØ¯ ÙˆØ§Ù„Ø­Ø³Ù… Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
      </div>
      <div class="summary-pill">
        <span class="summary-label">Ø§Ù„Ù…Ø³ØªØ­Ù‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</span>
        <span class="summary-value">{{ '%.2f'|format(grand_total) }} {{ service.currency or 'â‚ª' }}</span>
        <span class="summary-meta">{{ tax_rate > 0 and ('ÙŠØ´Ù…Ù„ Ø¶Ø±ÙŠØ¨Ø© ' ~ ('%.0f'|format(tax_rate)) ~ '%') or 'Ø¨Ø¯ÙˆÙ† Ø¶Ø±ÙŠØ¨Ø©' }}</span>
      </div>
    </div>
  {% endif %}

  {% if is_simple %}
    <div class="section">
      <div class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</div>
      <div class="info-row"><span class="info-label">Ø§Ù„Ø§Ø³Ù…</span><span class="info-value">{{ service.customer.name if service.customer else 'â€”' }}</span></div>
      <div class="info-row"><span class="info-label">Ø§Ù„Ø¬ÙˆØ§Ù„</span><span class="info-value">{{ service.customer.phone if service.customer else 'â€”' }}</span></div>
      <div class="info-row"><span class="info-label">Ø§Ù„Ø¨Ø±ÙŠØ¯</span><span class="info-value">{{ service.customer.email if service.customer else 'â€”' }}</span></div>
    </div>
    <div class="section">
      <div class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ¨Ø©</div>
      <div class="info-row"><span class="info-label">Ø§Ù„Ù†ÙˆØ¹</span><span class="info-value">{{ service.vehicle_type.name if service.vehicle_type else 'â€”' }}</span></div>
      <div class="info-row"><span class="info-label">Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</span><span class="info-value">{{ service.vehicle_model or 'â€”' }}</span></div>
      <div class="info-row"><span class="info-label">Ø§Ù„Ù„ÙˆØ­Ø©</span><span class="info-value">{{ service.vehicle_vrn or 'â€”' }}</span></div>
    </div>
    {% if service.problem_description or service.engineer_notes %}
    <div class="section">
      <div class="section-title">Ø§Ù„ÙˆØµÙ Ø§Ù„ÙÙ†ÙŠ</div>
      {% if service.problem_description %}<div class="info-row"><span class="info-label">Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</span><span class="info-value">{{ service.problem_description }}</span></div>{% endif %}
      {% if service.engineer_notes %}<div class="info-row"><span class="info-label">ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙÙ†ÙŠ</span><span class="info-value">{{ service.engineer_notes }}</span></div>{% endif %}
    </div>
    {% endif %}
  {% else %}
    <div class="section">
      <div class="section-title">
        Ù…Ù„ÙØ§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆØ§Ù„Ù…Ø±ÙƒØ¨Ø©
        <span class="badge-chip">{{ service.customer.name if service.customer else 'Ø¨Ø¯ÙˆÙ† Ø¹Ù…ÙŠÙ„' }}</span>
      </div>
      <div class="info-grid">
        <div class="data-card">
          <span class="data-label">Ø§Ù„Ø¹Ù…ÙŠÙ„</span>
          <span class="data-value">{{ service.customer.name if service.customer else 'â€”' }}</span>
          <span class="summary-meta">{{ service.customer.phone if service.customer else 'Ø¨Ø¯ÙˆÙ† Ø±Ù‚Ù…' }}</span>
        </div>
        <div class="data-card">
          <span class="data-label">Ø§Ù„Ø¨Ø±ÙŠØ¯</span>
          <span class="data-value">{{ service.customer.email if service.customer and service.customer.email else 'â€”' }}</span>
          <span class="summary-meta">Ù…Ø±Ø§Ø³Ù„Ø§Øª</span>
        </div>
        <div class="data-card">
          <span class="data-label">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©</span>
          <span class="data-value">{{ service.vehicle_type.name if service.vehicle_type else 'â€”' }}</span>
          <span class="summary-meta">{{ service.vehicle_model or 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' }}</span>
        </div>
        <div class="data-card">
          <span class="data-label">Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©</span>
          <span class="data-value">{{ service.vehicle_vrn or 'â€”' }}</span>
          <span class="summary-meta">{{ status_label }}</span>
        </div>
      </div>
      {% if service.problem_description or service.engineer_notes %}
      <div class="data-card" style="margin-top:16px;">
        <span class="data-label">Ø§Ù„ÙˆØµÙ Ø§Ù„ÙÙ†ÙŠ</span>
        <span class="data-value" style="font-size:14px;font-weight:600;">{{ service.problem_description or service.engineer_notes }}</span>
        {% if service.engineer_notes and service.problem_description %}
        <span class="summary-meta">{{ service.engineer_notes }}</span>
        {% endif %}
      </div>
      {% endif %}
    </div>
  {% endif %}

  <div class="section">
    <div class="section-title">
      ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©
      {% if not is_simple %}
      <span class="badge-chip">{{ (service.parts|length + service.tasks|length) if service.parts or service.tasks else 0 }} Ø¨Ù†ÙˆØ¯</span>
      {% endif %}
    </div>
    <table class="table">
      <thead>
        <tr>
          <th>Ø§Ù„Ù†ÙˆØ¹</th>
          <th>Ø§Ù„ÙˆØµÙ</th>
          <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
          <th>Ø§Ù„Ø³Ø¹Ø±</th>
          <th>Ø§Ù„Ø®ØµÙ…</th>
          <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
        </tr>
      </thead>
      <tbody>
        {% for part in (service.parts or []) %}
        {% set qty = (part.quantity or 0)|float %}
        {% set price = (part.unit_price or 0)|float %}
        {% set disc = (part.discount or 0)|float %}
        {% set gross = qty * price %}
        {% set net = gross - disc %}
        <tr>
          <td>Ù‚Ø·Ø¹Ø©</td>
          <td class="wrap">{{ part.part.name if part.part else 'â€”' }}</td>
          <td>{{ qty|int }}</td>
          <td class="num">{{ '%.2f'|format(price) }}</td>
          <td class="num">{{ disc > 0 and ('%.2f'|format(disc)) or 'â€”' }}</td>
          <td class="num">{{ '%.2f'|format(net) }}</td>
        </tr>
        {% endfor %}
        {% for task in (service.tasks or []) %}
        {% set qty = (task.quantity or 0)|float %}
        {% set price = (task.unit_price or 0)|float %}
        {% set disc = (task.discount or 0)|float %}
        {% set gross = qty * price %}
        {% set net = gross - disc %}
        <tr>
          <td>Ù…Ù‡Ù…Ø©</td>
          <td class="wrap">{{ task.description or 'â€”' }}</td>
          <td>{{ qty|int }}</td>
          <td class="num">{{ '%.2f'|format(price) }}</td>
          <td class="num">{{ disc > 0 and ('%.2f'|format(disc)) or 'â€”' }}</td>
          <td class="num">{{ '%.2f'|format(net) }}</td>
        </tr>
        {% endfor %}
      </tbody>
      {% if not service.parts and not service.tasks %}
      <tbody>
        <tr>
          <td colspan="6" style="text-align:center;color:#8a94a8;padding:16px 0;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ù†ÙˆØ¯ Ù…Ø³Ø¬Ù„Ø©</td>
        </tr>
      </tbody>
      {% endif %}
    </table>
  </div>

  <div class="totals">
    <div class="totals-row">
      <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ù‚Ø¨Ù„ Ø§Ù„Ø®ØµÙ…</span>
      <span>{{ '%.2f'|format(ns.gross_total) }} {{ service.currency or 'â‚ª' }}</span>
    </div>
    {% if ns.items_discount > 0 %}
    <div class="totals-row">
      <span>Ø®ØµÙ… Ø§Ù„Ø¨Ù†ÙˆØ¯</span>
      <span>-{{ '%.2f'|format(ns.items_discount) }} {{ service.currency or 'â‚ª' }}</span>
    </div>
    {% endif %}
    {% if global_discount > 0 %}
    <div class="totals-row">
      <span>Ø®ØµÙ… Ø¥Ø¶Ø§ÙÙŠ</span>
      <span>-{{ '%.2f'|format(global_discount) }} {{ service.currency or 'â‚ª' }}</span>
    </div>
    {% endif %}
    <div class="totals-row">
      <span>Ø§Ù„ØµØ§ÙÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…</span>
      <span>{{ '%.2f'|format(subtotal_after_all_disc) }} {{ service.currency or 'â‚ª' }}</span>
    </div>
    {% if tax_rate > 0 %}
    <div class="totals-row">
      <span>Ø¶Ø±ÙŠØ¨Ø© {{ '%.0f'|format(tax_rate) }}%</span>
      <span>{{ '%.2f'|format(tax_amount) }} {{ service.currency or 'â‚ª' }}</span>
    </div>
    {% endif %}
    <div class="totals-row final">
      <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</span>
      <span>{{ '%.2f'|format(grand_total) }} {{ service.currency or 'â‚ª' }}</span>
    </div>
  </div>

  <div class="signatures">
    <div class="sign-slot">
      <div class="sign-line"></div>
      <div>ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„</div>
    </div>
    <div class="sign-slot">
      <div class="sign-line"></div>
      <div>ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</div>
    </div>
  </div>

  {% if not is_simple %}
  <div class="footer">
    <div>{{ system_settings.company_name or 'Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„ÙÙ„Ø³Ø·ÙŠÙ†ÙŠ Ù„Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ø«Ù‚ÙŠÙ„Ø©' }}</div>
    <div>{{ system_settings.company_address or 'Ø±Ø§Ù… Ø§Ù„Ù„Ù‡ - ÙÙ„Ø³Ø·ÙŠÙ†' }}</div>
    <div>{{ system_settings.company_phone or '' }}</div>
  </div>
  {% endif %}

  <div class="no-print">
    <div style="margin-bottom:14px;">
      <button class="print-btn" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
      <a class="back-btn" href="{{ url_for('service.view_request', rid=service.id) }}">Ø±Ø¬ÙˆØ¹</a>
    </div>
    <div class="switcher">
      <a href="{{ url_for('service.view_receipt', rid=service.id) }}" class="{{ 'active' if not is_simple else '' }}">Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</a>
      <a href="{{ url_for('service.view_receipt', rid=service.id, simple=1) }}" class="{{ 'active' if is_simple else '' }}">Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø¨Ø³Ø·Ø©</a>
    </div>
  </div>
</div>
{% endblock %}
