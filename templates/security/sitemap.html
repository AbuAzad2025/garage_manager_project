{% extends 'security/base_security.html' %}

{% block tour_name %}sitemap{% endblock %}

{% block security_title %}Sitemap{% endblock %}
{% block security_icon %}<i class="fas fa-sitemap"></i>{% endblock %}
{% block security_description %}ุฎุฑูุทุฉ ุชูุตูููุฉ ูุฌููุน ุตูุญุงุช ููุญุฏุงุช ุงููุธุงู{% endblock %}

{% block security_breadcrumb %}
<li class="breadcrumb-item active">Sitemap</li>
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/security_responsive.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/security_dark_mode.css') }}">
<style>
  .sitemap-tree {
    list-style: none;
    padding-right: 0;
  }
  
  .sitemap-tree ul {
    list-style: none;
    padding-right: 25px;
    margin-top: 10px;
  }
  
  .sitemap-tree li {
    margin: 8px 0;
    padding: 8px 12px;
    border-right: 3px solid #667eea;
    transition: all 0.2s;
  }
  
  .sitemap-tree li:hover {
    background: #f8f9fa;
    border-right-width: 5px;
  }
  
  .sitemap-tree a {
    text-decoration: none;
    color: #333;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .sitemap-tree a:hover {
    color: #667eea !important;
  }
  
  .sitemap-tree .badge {
    font-size: 0.7rem;
  }
  
  .sitemap-section {
    margin-bottom: 30px;
    padding: 20px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  
  .sitemap-section h4 {
    color: #667eea;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid #667eea;
  }
  
  /* Dark Mode */
  body.dark-mode .sitemap-tree li:hover {
    background: #1a2942 !important;
  }
  
  body.dark-mode .sitemap-tree a {
    color: #e0e0e0 !important;
  }
  
  body.dark-mode .sitemap-section {
    background: #0f3460 !important;
  }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
  
  {% include 'security/_navigation.html' %}
  
  <!-- ุนููุงู ุฑุฆูุณู -->
  <div class="alert border-0 shadow-sm mb-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <i class="fas fa-sitemap"></i>
        <strong>ุฎุฑูุทุฉ ุงููููุน:</strong>
        <span class="badge bg-white text-primary ms-2">ุฌููุน ุงูุฑูุงุจุท ูู ููุงู ูุงุญุฏ</span>
      </div>
      <small class="opacity-75">7 ูุฑุงูุฒ โข 38 ุชุจููุจ โข 121 ูุธููุฉ</small>
    </div>
  </div>
  
  <!-- ุจุญุซ ูู ุงูุฎุฑูุทุฉ -->
  <div class="mb-4">
    <div class="input-group">
      <span class="input-group-text bg-primary text-white">
        <i class="fas fa-search"></i>
      </span>
      <input type="text" id="sitemapSearch" class="form-control" 
             placeholder="๐ ุงุจุญุซ ูู ุฎุฑูุทุฉ ุงููููุน...">
    </div>
  </div>
  
  <div class="row">
    
    <!-- ุงููุฑุงูุฒ ุงูููุญุฏุฉ ุงูุณุจุนุฉ -->
    <div class="col-lg-6">
      <div class="sitemap-section">
        <h4><i class="fas fa-th-large"></i> ุงููุฑุงูุฒ ุงูููุญุฏุฉ (7 ูุฑุงูุฒ)</h4>
        
        <ul class="sitemap-tree">
          
          <!-- Database Manager -->
          <li>
            <a href="{{ url_for('security.database_manager') }}">
              <i class="fas fa-database text-primary"></i>
              <strong>Database Control Center</strong>
              <span class="badge bg-primary">11 ุชุจููุจ</span>
            </a>
            <ul>
              <li><a href="{{ url_for('security.database_manager', tab='browse') }}"><i class="fas fa-search"></i> ุชุตูุญ ุงูุฌุฏุงูู</a></li>
              <li><a href="{{ url_for('security.database_manager', tab='edit') }}"><i class="fas fa-edit"></i> ุชุญุฑูุฑ ุงูุจูุงูุงุช</a></li>
              <li><a href="{{ url_for('security.database_manager', tab='schema') }}"><i class="fas fa-sitemap"></i> ูููู ุงูุฌุฏุงูู</a></li>
              <li><a href="{{ url_for('security.database_manager', tab='indexes') }}"><i class="fas fa-bolt"></i> ุฅุฏุงุฑุฉ ุงูููุงุฑุณ</a></li>
              <li><a href="{{ url_for('security.database_manager', tab='logs') }}"><i class="fas fa-file-alt"></i> ุงูุณุฌูุงุช</a></li>
              <li><a href="{{ url_for('security.database_manager', tab='sql') }}"><i class="fas fa-code"></i> SQL Console</a></li>
              <li><a href="{{ url_for('security.database_manager', tab='python') }}"><i class="fab fa-python"></i> Python Console</a></li>
              <li><a href="{{ url_for('security.database_manager', tab='maintenance') }}"><i class="fas fa-tools"></i> ุงูุตูุงูุฉ</a></li>
              <li><a href="{{ url_for('security.database_manager', tab='restore') }}"><i class="fas fa-upload"></i> ุงูุงุณุชุนุงุฏุฉ</a></li>
              <li><a href="{{ url_for('security.database_manager', tab='tools') }}"><i class="fas fa-wrench"></i> ุงูุฃุฏูุงุช</a></li>
              <li><a href="{{ url_for('security.database_manager', tab='archive') }}"><i class="fas fa-archive"></i> ุงูุฃุฑุดููุงุช</a></li>
            </ul>
          </li>
          
          <!-- AI Hub -->
          <li>
            <a href="{{ url_for('ai.hub') }}">
              <i class="fas fa-brain text-purple"></i>
              <strong>AI Control Center</strong>
              <span class="badge bg-purple">4 ุชุจููุจุงุช</span>
            </a>
            <ul>
              <li><a href="{{ url_for('ai.hub', tab='assistant') }}"><i class="fas fa-comments"></i> ูุณุงุนุฏ ุฐูู</a></li>
              <li><a href="{{ url_for('ai.hub', tab='analytics') }}"><i class="fas fa-chart-line"></i> ุชุญููู ูุฃููุงุท</a></li>
              <li><a href="{{ url_for('ai.hub', tab='prediction') }}"><i class="fas fa-crystal-ball"></i> ุชูุจุค</a></li>
              <li><a href="{{ url_for('ai.hub', tab='training') }}"><i class="fas fa-graduation-cap"></i> ุชุฏุฑูุจ ูุฎุฑูุทุฉ</a></li>
            </ul>
          </li>
          
          <!-- Security Center -->
          <li>
            <a href="{{ url_for('security.security_center') }}">
              <i class="fas fa-shield-alt text-danger"></i>
              <strong>Security & Monitoring Center</strong>
              <span class="badge bg-danger">4 ุชุจููุจุงุช</span>
            </a>
            <ul>
              <li><a href="{{ url_for('security.security_center', tab='monitoring') }}"><i class="fas fa-tv"></i> ูุฑุงูุจุฉ ููุฑูุฉ</a></li>
              <li><a href="{{ url_for('security.security_center', tab='firewall') }}"><i class="fas fa-shield-alt"></i> ุฌุฏุงุฑ ุงูุญูุงูุฉ</a></li>
              <li><a href="{{ url_for('security.security_center', tab='notifications') }}"><i class="fas fa-bell"></i> ุงูุชูุจููุงุช</a></li>
              <li><a href="{{ url_for('security.security_center', tab='activity') }}"><i class="fas fa-history"></i> ุงููุดุงุท</a></li>
            </ul>
          </li>
          
          <!-- Users Center -->
          <li>
            <a href="{{ url_for('security.users_center') }}">
              <i class="fas fa-users-cog text-success"></i>
              <strong>Users & Permissions Center</strong>
              <span class="badge bg-success">2 ุชุจููุจ</span>
            </a>
            <ul>
              <li><a href="{{ url_for('security.users_center', tab='users') }}"><i class="fas fa-users"></i> ุงูุชุญูู ุจุงููุณุชุฎุฏููู</a></li>
              <li><a href="{{ url_for('security.users_center', tab='permissions') }}"><i class="fas fa-key"></i> ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช</a></li>
            </ul>
          </li>
          
        </ul>
      </div>
    </div>
    
    <div class="col-lg-6">
      <div class="sitemap-section">
        <h4><i class="fas fa-th-large"></i> ุงููุฑุงูุฒ ุงูููุญุฏุฉ (ุชูููุฉ)</h4>
        
        <ul class="sitemap-tree">
          
          <!-- Settings Center -->
          <li>
            <a href="{{ url_for('security.settings_center') }}">
              <i class="fas fa-cogs text-warning"></i>
              <strong>Settings & Customization Center</strong>
              <span class="badge bg-warning text-dark">8 ุชุจููุจุงุช</span>
            </a>
            <ul>
              <li><a href="{{ url_for('security.settings_center', tab='system') }}"><i class="fas fa-cog"></i> ุฅุนุฏุงุฏุงุช ุงููุธุงู</a></li>
              <li><a href="{{ url_for('security.settings_center', tab='constants') }}"><i class="fas fa-database"></i> ุงูุซูุงุจุช</a></li>
              <li><a href="{{ url_for('security.settings_center', tab='config') }}"><i class="fas fa-sliders-h"></i> ุชูููู ูุชูุฏู</a></li>
              <li><a href="{{ url_for('security.settings_center', tab='branding') }}"><i class="fas fa-tag"></i> ุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ</a></li>
              <li><a href="{{ url_for('security.settings_center', tab='theme') }}"><i class="fas fa-palette"></i> ุงููุธูุฑ</a></li>
              <li><a href="{{ url_for('security.settings_center', tab='logos') }}"><i class="fas fa-image"></i> ุงูุดุนุงุฑุงุช</a></li>
              <li><a href="{{ url_for('security.settings_center', tab='darkmode') }}"><i class="fas fa-moon"></i> ุงููุถุน ุงููููู</a></li>
              <li><a href="{{ url_for('security.settings_center', tab='branches') }}"><i class="fas fa-code-branch"></i> ุงููุฑูุน</a></li>
            </ul>
          </li>
          
          <!-- Reports Center -->
          <li>
            <a href="{{ url_for('security.reports_center') }}">
              <i class="fas fa-chart-bar text-info"></i>
              <strong>Reports & Performance Center</strong>
              <span class="badge bg-info">4 ุชุจููุจุงุช</span>
            </a>
            <ul>
              <li><a href="{{ url_for('security.reports_center', tab='reports') }}"><i class="fas fa-file-alt"></i> ุงูุชูุงุฑูุฑ ุงูุฅุฏุงุฑูุฉ</a></li>
              <li><a href="{{ url_for('security.reports_center', tab='monitoring') }}"><i class="fas fa-chart-area"></i> ููุญุฉ ุงููุฑุงูุจุฉ</a></li>
              <li><a href="{{ url_for('security.reports_center', tab='performance') }}"><i class="fas fa-tachometer-alt"></i> ูุฑุงูุจุฉ ุงูุฃุฏุงุก</a></li>
              <li><a href="{{ url_for('security.reports_center', tab='grafana') }}"><i class="fas fa-chart-pie"></i> Grafana</a></li>
            </ul>
          </li>
          
          <!-- Tools Center -->
          <li>
            <a href="{{ url_for('security.tools_center') }}">
              <i class="fas fa-toolbox text-success"></i>
              <strong>Tools & Integration Center</strong>
              <span class="badge bg-success">5 ุชุจููุจุงุช</span>
            </a>
            <ul>
              <li><a href="{{ url_for('security.tools_center', tab='integrations') }}"><i class="fas fa-plug"></i> ุงูุชูุงููุงุช</a></li>
              <li><a href="{{ url_for('security.tools_center', tab='invoices') }}"><i class="fas fa-file-invoice"></i> ูุญุฑุฑ ุงูููุงุชูุฑ</a></li>
              <li><a href="{{ url_for('security.tools_center', tab='email') }}"><i class="fas fa-envelope"></i> ุฅุฏุงุฑุฉ ุงูุจุฑูุฏ</a></li>
              <li><a href="{{ url_for('security.tools_center', tab='cards') }}"><i class="fas fa-credit-card"></i> ุฎุฒูุฉ ุงููุฑูุช</a></li>
              <li><a href="{{ url_for('security.tools_center', tab='export') }}"><i class="fas fa-download"></i> ุชุตุฏูุฑ ุงูุจูุงูุงุช</a></li>
            </ul>
          </li>
          
        </ul>
      </div>
      
      <!-- Ledger Control -->
      <div class="sitemap-section">
        <h4><i class="fas fa-book"></i> ุฏูุชุฑ ุงูุฃุณุชุงุฐ</h4>
        <ul class="sitemap-tree">
          <li>
            <a href="{{ url_for('ledger_control.index') }}">
              <i class="fas fa-university text-dark"></i>
              <strong>Ledger Control</strong>
              <span class="badge bg-dark">4 ุชุจููุจุงุช</span>
            </a>
            <ul>
              <li><a href="{{ url_for('ledger_control.index') }}#tab-accounts"><i class="fas fa-list"></i> ุงูุญุณุงุจุงุช ุงููุญุงุณุจูุฉ</a></li>
              <li><a href="{{ url_for('ledger_control.index') }}#tab-entries"><i class="fas fa-file"></i> ุงููููุฏ ุงููุญุงุณุจูุฉ</a></li>
              <li><a href="{{ url_for('ledger_control.index') }}#tab-batches"><i class="fas fa-edit"></i> ุชุญุฑูุฑ ุงููููุฏ</a></li>
              <li><a href="{{ url_for('ledger_control.index') }}#tab-tools"><i class="fas fa-tools"></i> ุงูุฃุฏูุงุช</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
    
    <!-- ุงูุฃุฏูุงุช ุงููุณุชููุฉ -->
    <div class="col-lg-6">
      <div class="sitemap-section">
        <h4><i class="fas fa-tools"></i> ุงูุฃุฏูุงุช ุงููุณุชููุฉ</h4>
        
        <ul class="sitemap-tree">
            <li><a href="{{ url_for('security.index') }}"><i class="fas fa-tachometer-alt"></i> ููุญุฉ ุงููุนูููุงุช</a></li>
          <li><a href="{{ url_for('security.user_control') }}"><i class="fas fa-user-shield"></i> ุงูุชุญูู ุจุงููุณุชุฎุฏููู</a></li>
          <li><a href="{{ url_for('security.card_vault') }}"><i class="fas fa-credit-card"></i> ุฎุฒูุฉ ุงููุฑูุช</a></li>
          <li><a href="{{ url_for('security.emergency_tools') }}"><i class="fas fa-exclamation-triangle text-danger"></i> ุฃุฏูุงุช ุงูุทูุงุฑุฆ</a></li>
          <li><a href="{{ url_for('security.data_export') }}"><i class="fas fa-download"></i> ุชุตุฏูุฑ ุงูุจูุงูุงุช</a></li>
          <li><a href="{{ url_for('security.system_cleanup') }}"><i class="fas fa-broom"></i> ุชูุธูู ุงููุธุงู</a></li>
          <li><a href="{{ url_for('security.integrations') }}"><i class="fas fa-plug"></i> ุงูุชูุงููุงุช (ูุจุงุดุฑ)</a></li>
          <li><a href="{{ url_for('security.saas_manager') }}"><i class="fas fa-cloud"></i> ูุฏูุฑ SaaS</a></li>
          <li><a href="{{ url_for('security.advanced_check_linking') }}"><i class="fas fa-link"></i> ุฑุจุท ุงูุดููุงุช ุงููุชูุฏู</a></li>
          <li><a href="{{ url_for('security.data_quality_center') }}"><i class="fas fa-check-circle"></i> ูุฑูุฒ ุฌูุฏุฉ ุงูุจูุงูุงุช</a></li>
        </ul>
      </div>
      
      <!-- ุงูุฃูุงู ูุงูุญุธุฑ -->
      <div class="sitemap-section">
        <h4><i class="fas fa-shield-alt"></i> ุงูุฃูุงู ูุงูุญุธุฑ</h4>
        
        <ul class="sitemap-tree">
          <li><a href="{{ url_for('security.block_ip') }}"><i class="fas fa-ban text-danger"></i> ุญุธุฑ IP</a></li>
          <li><a href="{{ url_for('security.blocked_ips') }}"><i class="fas fa-list"></i> IPs ูุญุธูุฑุฉ</a></li>
          <li><a href="{{ url_for('security.block_country') }}"><i class="fas fa-globe text-warning"></i> ุญุธุฑ ุฏููุฉ</a></li>
          <li><a href="{{ url_for('security.blocked_countries') }}"><i class="fas fa-flag"></i> ุฏูู ูุญุธูุฑุฉ</a></li>
        </ul>
      </div>
    </div>
    
    <!-- ุงูุฅุฏุงุฑุฉ ูุงูุฅุนุฏุงุฏุงุช -->
    <div class="col-lg-6">
      <div class="sitemap-section">
        <h4><i class="fas fa-cog"></i> ุงูุฅุฏุงุฑุฉ ูุงูุฅุนุฏุงุฏุงุช</h4>
        
        <ul class="sitemap-tree">
          <li><a href="{{ url_for('security.settings_center') }}"><i class="fas fa-sliders-h"></i> ุฅุนุฏุงุฏุงุช ุงููุธุงู</a></li>
          <li><a href="{{ url_for('security.theme_editor') }}"><i class="fas fa-palette"></i> ูุญุฑุฑ ุงูุซููุงุช</a></li>
          <li><a href="{{ url_for('security.logo_manager') }}"><i class="fas fa-image"></i> ูุฏูุฑ ุงูุดุนุงุฑุงุช</a></li>
          <li><a href="{{ url_for('security.permissions_manager') }}"><i class="fas fa-key"></i> ูุฏูุฑ ุงูุตูุงุญูุงุช</a></li>
          <li><a href="{{ url_for('security.email_manager') }}"><i class="fas fa-envelope"></i> ูุฏูุฑ ุงูุจุฑูุฏ</a></li>
          <li><a href="{{ url_for('security.invoice_designer') }}"><i class="fas fa-file-invoice"></i> ูุตูู ุงูููุงุชูุฑ</a></li>
        </ul>
      </div>
      
      <!-- ุงููุฑุงูุจุฉ ูุงูุฃุฏุงุก -->
      <div class="sitemap-section">
        <h4><i class="fas fa-chart-line"></i> ุงููุฑุงูุจุฉ ูุงูุฃุฏุงุก</h4>
        
        <ul class="sitemap-tree">
          <li><a href="{{ url_for('security.live_monitoring') }}"><i class="fas fa-tv"></i> ูุฑุงูุจุฉ ููุฑูุฉ</a></li>
          <li><a href="{{ url_for('security.performance_monitor') }}"><i class="fas fa-tachometer-alt"></i> ูุฑุงูุจ ุงูุฃุฏุงุก</a></li>
          <li><a href="{{ url_for('security.monitoring_dashboard') }}"><i class="fas fa-chart-area"></i> ููุญุฉ ุงููุฑุงูุจุฉ</a></li>
          <li><a href="{{ url_for('security.grafana_setup') }}"><i class="fas fa-chart-pie"></i> ุฅุนุฏุงุฏ Grafana</a></li>
          <li><a href="{{ url_for('security.advanced_analytics') }}"><i class="fas fa-chart-bar"></i> ุชุญูููุงุช ูุชูุฏูุฉ</a></li>
        </ul>
      </div>
      
      <!-- ูุณุงุนุฏุฉ ูุฏุนู -->
      <div class="sitemap-section">
        <h4><i class="fas fa-question-circle"></i> ูุณุงุนุฏุฉ ูุฏุนู</h4>
        
        <ul class="sitemap-tree">
          <li><a href="{{ url_for('security.help_page') }}"><i class="fas fa-book-open text-info"></i> ูุฑูุฒ ุงููุณุงุนุฏุฉ</a></li>
          <li><a href="{{ url_for('security.sitemap') }}"><i class="fas fa-sitemap text-primary"></i> ุฎุฑูุทุฉ ุงููููุน (ุฃูุช ููุง)</a></li>
          <li><a href="{{ url_for('api.docs') }}"><i class="fas fa-code"></i> API Documentation</a></li>
        </ul>
      </div>
    </div>
    
  </div>
  
  <!-- ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ -->
  <div class="row mt-4">
    <div class="col-12">
      <div class="alert alert-light border text-center">
        <h5 class="mb-3"><i class="fas fa-chart-pie"></i> ุฅุญุตุงุฆูุงุช ุงููุญุฏุฉ ุงูุณุฑูุฉ</h5>
        <div class="row">
          <div class="col-md-3">
            <div class="p-3 bg-primary text-white rounded">
              <h3 class="mb-0">7</h3>
              <small>ูุฑุงูุฒ ููุญุฏุฉ</small>
            </div>
          </div>
          <div class="col-md-3">
            <div class="p-3 bg-success text-white rounded">
              <h3 class="mb-0">38</h3>
              <small>ุชุจููุจ</small>
            </div>
          </div>
          <div class="col-md-3">
            <div class="p-3 bg-info text-white rounded">
              <h3 class="mb-0">121</h3>
              <small>ุฑุงูุชุฑ</small>
            </div>
          </div>
          <div class="col-md-3">
            <div class="p-3 bg-warning text-dark rounded">
              <h3 class="mb-0">45</h3>
              <small>ูุงูุจ</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock %}

{% block scripts %}
<script>
// ุงูุจุญุซ ูู ุฎุฑูุทุฉ ุงููููุน
document.getElementById('sitemapSearch').addEventListener('input', function() {
  const query = this.value.toLowerCase();
  const items = document.querySelectorAll('.sitemap-tree li');
  
  items.forEach(item => {
    const text = item.textContent.toLowerCase();
    const shouldShow = !query || text.includes(query);
    item.style.display = shouldShow ? '' : 'none';
    
    // ุฅุธูุงุฑ ุงูุฃูุณุงู ุงูุฃุจ ุฅุฐุง ูุงู ุงูุงุจู ูุทุงุจู
    if (shouldShow && item.closest('ul')) {
      let parent = item.parentElement;
      while (parent) {
        if (parent.tagName === 'LI') {
          parent.style.display = '';
        }
        parent = parent.parentElement;
      }
    }
  });
});
</script>
{% endblock %}

