{% extends 'warehouses/base.html' %}
{% block title %}الشحنات{% if warehouse %} – {{ warehouse.name }}{% endif %}{% endblock %}
{% block page_title %}الشحنات{% if warehouse %} – {{ warehouse.name }}{% endif %}{% endblock %}

{% block head_extra %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/shipments.css') }}">
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css">
{% endblock %}

{% block content %}
<div class="mb-3 d-flex justify-content-between align-items-center">
  <h3 class="mb-0">الشحنات{% if warehouse %} في {{ warehouse.name }}{% endif %}</h3>
  <a id="addShipmentBtn" href="{{ url_for('shipments_bp.create_shipment', destination_id=warehouse.id) if warehouse else url_for('shipments_bp.create_shipment') }}" class="btn btn-success btn-sm">
    <i class="fa fa-plus"></i> إضافة شحنة
  </a>
</div>

<form id="shipmentsFilters" class="row g-2 mb-3">
  <div class="col-md-2">
    <label class="form-label">الحالة</label>
    <select id="fStatus" class="form-select" name="status">
      <option value="">الكل</option>
      <option value="DRAFT">مسودة</option>
      <option value="IN_TRANSIT">قيد الشحن</option>
      <option value="ARRIVED">وصلت</option>
      <option value="CANCELLED">ملغاة</option>
    </select>
  </div>
  <div class="col-md-2">
    <label class="form-label">من تاريخ</label>
    <input type="date" id="fFrom" class="form-control" name="from">
  </div>
  <div class="col-md-2">
    <label class="form-label">إلى تاريخ</label>
    <input type="date" id="fTo" class="form-control" name="to">
  </div>
  <div class="col-md-3">
    <label class="form-label">الوجهة</label>
    <input type="text" id="fDestination" class="form-control" name="destination" placeholder="اسم المستودع/الوجهة">
  </div>
  <div class="col-md-3">
    <label class="form-label">بحث عام</label>
    <input type="text" id="fSearch" class="form-control" name="search" placeholder="رقم الشحنة / شركة النقل / تتبع">
  </div>
</form>

<div class="table-responsive">
  <table id="shipmentsTable" class="table table-striped table-hover align-middle" style="width:100%">
    <thead class="table-light">
      <tr>
        <th>#</th>
        <th>رقم الشحنة</th>
        <th>الوجهة</th>
        <th>تاريخ الوصول المتوقع</th>
        <th>الحالة</th>
        <th class="text-end">الإجمالي</th>
        <th class="text-center">إجراءات</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
  <script src="{{ url_for('static', filename='js/shipments.js') }}"></script>
{% endblock %}
