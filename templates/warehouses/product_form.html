{# ░░ templates/warehouses/product_form.html ░░ #}
{% extends 'warehouses/base.html' %}
{% block title %}{{ product and "تعديل قطعة" or "إضافة قطعة" }}{% endblock %}

{% block warehouses_content %}
<div class="card shadow-lg mt-4">
  <div class="card-header bg-primary text-white">
    <h3 class="mb-0">
      <i class="fa fa-cog me-2"></i>
      {{ product and "تعديل قطعة" or "إضافة قطعة جديدة" }}
    </h3>
  </div>

  <div class="card-body">
    <form method="post" novalidate autocomplete="off">
      {{ form.hidden_tag() }}

      <!-- الصف 1 -->
      <div class="row g-3">
        <div class="col-md-4">{{ form.name.label }}{{ form.name(class="form-control") }}</div>
        <div class="col-md-4">{{ form.part_number.label }}{{ form.part_number(class="form-control") }}</div>
        <div class="col-md-4">{{ form.commercial_name.label }}{{ form.commercial_name(class="form-control") }}</div>
      </div>

      <!-- الصف 2 -->
      <div class="row g-3 mt-2">
        <div class="col-md-3">{{ form.chassis_number.label }}{{ form.chassis_number(class="form-control") }}</div>
        <div class="col-md-3">{{ form.serial_no.label }}{{ form.serial_no(class="form-control") }}</div>
        <div class="col-md-3">{{ form.barcode.label }}{{ form.barcode(class="form-control") }}</div>
        <div class="col-md-3">{{ form.vehicle_type_id.label }}{{ form.vehicle_type_id(class="form-select select2") }}</div>
      </div>

      <!-- الصف 3 -->
      <div class="row g-3 mt-2">
        <div class="col-md-3">{{ form.cost_before_shipping.label }}{{ form.cost_before_shipping(class="form-control") }}</div>
        <div class="col-md-3">{{ form.cost_after_shipping.label }}{{ form.cost_after_shipping(class="form-control") }}</div>
        <div class="col-md-3">{{ form.unit_price_before_tax.label }}{{ form.unit_price_before_tax(class="form-control") }}</div>
        <div class="col-md-3">{{ form.price.label }}{{ form.price(class="form-control") }}</div>
      </div>

      <!-- الصف 4 -->
      <div class="row g-3 mt-2">
        <div class="col-md-2">{{ form.on_hand.label }}{{ form.on_hand(class="form-control") }}</div>
        <div class="col-md-2">{{ form.min_qty.label }}{{ form.min_qty(class="form-control") }}</div>
        <div class="col-md-2">{{ form.condition.label }}{{ form.condition(class="form-select") }}</div>
        <div class="col-md-2">{{ form.used_cost.label }}{{ form.used_cost(class="form-control") }}</div>
        <div class="col-md-2">{{ form.grade.label }}{{ form.grade(class="form-control") }}</div>
        <div class="col-md-2">{{ form.warranty_period.label }}{{ form.warranty_period(class="form-control") }}</div>
      </div>

      <!-- الصف 5 -->
      <div class="row g-3 mt-2">
        <div class="col-md-3">{{ form.origin_country.label }}{{ form.origin_country(class="form-control") }}</div>
        <div class="col-md-3">{{ form.origin_price.label }}{{ form.origin_price(class="form-control") }}</div>
        <div class="col-md-3">{{ form.expiry_date.label }}{{ form.expiry_date(class="form-control datepicker") }}</div>
        <div class="col-md-3">{{ form.notes.label }}{{ form.notes(class="form-control") }}</div>
      </div>

      <!-- الصف 6 -->
      <div class="row g-3 mt-2">
        <div class="col-md-6">{{ form.supplier_international_id.label }}{{ form.supplier_international_id(class="form-select select2") }}</div>
        <div class="col-md-6">{{ form.supplier_local_id.label }}{{ form.supplier_local_id(class="form-select select2") }}</div>
      </div>

      <div class="form-check mt-3">
        {{ form.is_exchange(class="form-check-input") }}
        {{ form.is_exchange.label(class="form-check-label") }}
      </div>

      <div class="d-flex gap-2 mt-4">
        <button type="submit" class="btn btn-primary">
          <i class="fa fa-save"></i> حفظ
        </button>
        <a href="{{ url_for('warehouses.products_list') }}" class="btn btn-secondary">إلغاء</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='adminlte/plugins/select2/js/select2.full.min.js') }}"></script>
  <script src="{{ url_for('static', filename='adminlte/plugins/select2/js/i18n/ar.js') }}"></script>
  <script src="{{ url_for('static', filename='adminlte/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js') }}"></script>
  <script src="{{ url_for('static', filename='adminlte/plugins/bootstrap-datepicker/locales/bootstrap-datepicker.ar.min.js') }}"></script>

  <script>
    $(function () {
      $('.select2').select2({ theme: 'bootstrap4', width: '100%' });
      $('.datepicker').datepicker({ format:'yyyy-mm-dd', language:'ar', autoclose:true });
    });
  </script>
{% endblock %}
