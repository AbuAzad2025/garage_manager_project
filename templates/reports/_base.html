{% extends 'base.html' %}

{% block title %}{% block page_title %}Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±{% endblock %}{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{{ url_for('main.dashboard') }}">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
<li class="breadcrumb-item"><a href="{{ url_for('reports_bp.index') }}">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a></li>
{% block reports_breadcrumb_extra %}{% endblock %}
{% endblock %}

{% macro active_class(eps) -%}
  {%- if request.endpoint in eps %}active{% endif -%}
{%- endmacro %}

{% block content %}
<!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© ÙÙ‚Ø· -->
<div class="print-header-report">
  <div class="company-logo">
    <img src="{{ url_for('static', filename='img/azad_logo.png') }}" alt="Logo">
  </div>
  <div class="company-info">
    <div class="company-name">{{ system_settings.system_name or system_settings.company_name or 'ÙƒØ±Ø§Ø¬ Ø£Ø²Ø§Ø¯' }}</div>
    <div class="company-details">
      {% if system_settings.COMPANY_ADDRESS %}ğŸ“ {{ system_settings.COMPANY_ADDRESS }}{% endif %}
      {% if system_settings.COMPANY_PHONE %} | ğŸ“ {{ system_settings.COMPANY_PHONE }}{% endif %}
      {% if system_settings.COMPANY_EMAIL %} | ğŸ“§ {{ system_settings.COMPANY_EMAIL }}{% endif %}
    </div>
  </div>
  <div class="report-type">
    <h2>{{ self.page_title() }}</h2>
    <div class="report-date">ğŸ“… {{ now()|format_datetime }}</div>
    <div class="user-info" style="font-size: 7pt; margin-top: 1mm;">ğŸ‘¤ {{ current_user.username if current_user.is_authenticated else 'Ø§Ù„Ù†Ø¸Ø§Ù…' }}</div>
  </div>
</div>

<!-- ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© ÙÙ‚Ø· -->
<div class="print-footer-report">
  <div class="footer-line">
    <strong>{{ system_settings.system_name or system_settings.company_name or 'ÙƒØ±Ø§Ø¬ Ø£Ø²Ø§Ø¯' }}</strong>
  </div>
  <div class="footer-line print-time" style="font-size: 7pt; color: #999;">
    Ø·ÙØ¨Ø¹ Ø¨ÙˆØ§Ø³Ø·Ø©: {{ current_user.username if current_user.is_authenticated else 'Ø§Ù„Ù†Ø¸Ø§Ù…' }} | 
    {{ now()|format_datetime }}
  </div>
</div>

<div class="container-fluid" dir="rtl">
  <div class="card mb-3 shadow-sm">
    <div class="card-body p-2">
      <ul class="nav nav-pills flex-wrap gap-1">
        <li class="nav-item">
          <a class="nav-link nav-report-dashboard {{ active_class(['reports_bp.index']) }}" href="{{ url_for('reports_bp.index') }}">
            <i class="fas fa-home"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-dynamic {{ active_class(['reports_bp.dynamic_report']) }}" href="{{ url_for('reports_bp.dynamic_report') }}">
            <i class="fas fa-sliders-h"></i> ØªÙ‚Ø±ÙŠØ± Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-customers {{ active_class(['reports_bp.customers_report']) }}" href="{{ url_for('reports_bp.customers_report') }}">
            <i class="fas fa-user-friends"></i> Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-suppliers {{ active_class(['reports_bp.suppliers']) }}" href="{{ url_for('reports_bp.suppliers_report') }}">
            <i class="fas fa-truck-loading"></i> Ø§Ù„Ù…ÙˆØ±Ø¯ÙˆÙ†
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-partners {{ active_class(['reports_bp.partners']) }}" href="{{ url_for('reports_bp.partners_report') }}">
            <i class="fas fa-handshake"></i> Ø§Ù„Ø´Ø±ÙƒØ§Ø¡
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-sales {{ active_class(['reports_bp.sales']) }}" href="{{ url_for('reports_bp.sales') }}">
            <i class="fas fa-chart-line"></i> Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-payments {{ active_class(['reports_bp.payments_summary']) }}" href="{{ url_for('reports_bp.payments_summary') }}">
            <i class="fas fa-wallet"></i> Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-products {{ active_class(['reports_bp.top_products']) }}" href="{{ url_for('reports_bp.top_products') }}">
            <i class="fas fa-crown"></i> Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-expenses {{ active_class(['reports_bp.expenses']) }}" href="{{ url_for('reports_bp.expenses_report') }}">
            <i class="fas fa-wallet"></i> Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-inventory {{ active_class(['reports_bp.inventory']) }}" href="{{ url_for('reports_bp.inventory') }}">
            <i class="fas fa-boxes"></i> Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-below-min {{ active_class(['reports_bp.below_min_stock']) }}" href="{{ url_for('reports_bp.below_min_stock_report') }}">
            <i class="fas fa-exclamation-triangle"></i> ØªØ­Øª Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-shipments {{ active_class(['reports_bp.shipments']) }}" href="{{ url_for('reports_bp.shipments') }}">
            <i class="fas fa-shipping-fast"></i> Ø§Ù„Ø´Ø­Ù†Ø§Øª
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-online {{ active_class(['reports_bp.online']) }}" href="{{ url_for('reports_bp.online') }}">
            <i class="fas fa-globe"></i> Ø§Ù„Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-ar {{ active_class(['reports_bp.ar_aging']) }}" href="{{ url_for('reports_bp.ar_aging') }}">
            <i class="fas fa-user-clock"></i> Ø£Ø¹Ù…Ø§Ø± Ø§Ù„Ø°Ù…Ù… (Ø¹Ù…Ù„Ø§Ø¡)
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-ap {{ active_class(['reports_bp.ap_aging']) }}" href="{{ url_for('reports_bp.ap_aging') }}">
            <i class="fas fa-truck-loading"></i> Ø£Ø¹Ù…Ø§Ø± Ø§Ù„Ø°Ù…Ù… (Ù…ÙˆØ±Ø¯ÙˆÙ†)
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-report-service {{ active_class(['reports_bp.service_reports']) }}" href="{{ url_for('reports_bp.service_reports') }}">
            <i class="fas fa-tools"></i> Ø§Ù„ØµÙŠØ§Ù†Ø©
          </a>
        </li>
      </ul>
    </div>
  </div>
  {% block report_content %}{% endblock %}
</div>
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/reporting.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/reports-print.css') }}">
{% endblock %}

{% block scripts %}{% endblock %}
