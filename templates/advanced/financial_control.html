{% extends 'base.html' %}
{% block title %}ุงูุชุญูู ุงููุงูู ุงููุชูุฏู{% endblock %}
{% block page_title %}๐ฐ ุงูุชุญูู ุงููุงูู ุงููุชูุฏู - ููุญุฉ ุงููุงูู{% endblock %}

{% block content %}
<div class="container-fluid">
  
  {% include 'advanced/_navigation.html' %}
  
  <div class="alert alert-info border-0 shadow-sm mb-4">
    <i class="fas fa-shield-alt"></i> <strong>ููุญุฉ ุงูุชุญูู ุงููุงูู:</strong> ุฅุนุฏุงุฏุงุช ุญุณุงุณุฉ - ูููุงูู ููุท
  </div>

  <div class="row g-4">
    
    <div class="col-lg-6">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0"><i class="fas fa-chart-line"></i> ูุญุฏุฉ ุงูููุฒุงููุฉ</h5>
        </div>
        <div class="card-body">
          <form method="POST">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <input type="hidden" name="action" value="save_budget_settings">
            
            <div class="mb-3">
              <div class="form-check form-switch">
                <input type="checkbox" name="enable_budget_module" class="form-check-input" id="enable_budget" 
                       {% if budget_settings.enable_budget_module %}checked{% endif %}>
                <label class="form-check-label" for="enable_budget">
                  <strong>ุชูุนูู ูุญุฏุฉ ุงูููุฒุงููุฉ</strong>
                </label>
              </div>
              <small class="text-muted">ุฅุฏุงุฑุฉ ุงูููุฒุงููุงุช ุงูุณูููุฉ ููุฑุงูุจุฉ ุงููููุงุช</small>
            </div>

            <hr>

            <div class="mb-3">
              <label class="form-label">ุจุฏุงูุฉ ุงูุณูุฉ ุงููุงููุฉ</label>
              <select name="fiscal_year_start_month" class="custom-select">
                <option value="1" {% if budget_settings.fiscal_year_start_month == 1 %}selected{% endif %}>ููุงูุฑ (ูููุงุฏู)</option>
                <option value="3" {% if budget_settings.fiscal_year_start_month == 3 %}selected{% endif %}>ูุงุฑุณ</option>
                <option value="7" {% if budget_settings.fiscal_year_start_month == 7 %}selected{% endif %}>ููููู</option>
                <option value="9" {% if budget_settings.fiscal_year_start_month == 9 %}selected{% endif %}>ุณุจุชูุจุฑ (ูุฌุฑู ุชูุฑูุจู)</option>
              </select>
            </div>

            <div class="mb-3">
              <label class="form-label">ูุณุชูู ุงูููุฒุงููุฉ</label>
              <select name="budget_level" class="custom-select">
                <option value="ACCOUNT" {% if budget_settings.budget_level == 'ACCOUNT' %}selected{% endif %}>ุญุณุงุจ ููุท</option>
                <option value="ACCOUNT_BRANCH" {% if budget_settings.budget_level == 'ACCOUNT_BRANCH' %}selected{% endif %}>ุญุณุงุจ + ูุฑุน</option>
                <option value="ACCOUNT_BRANCH_SITE" {% if budget_settings.budget_level == 'ACCOUNT_BRANCH_SITE' %}selected{% endif %}>ุญุณุงุจ + ูุฑุน + ูููุน</option>
              </select>
            </div>

            <div class="mb-3">
              <label class="form-label">ูุธุงู ุงูุงูุชุฒุงูุงุช</label>
              <select name="commitment_mode" class="custom-select">
                <option value="NONE" {% if budget_settings.commitment_mode == 'NONE' %}selected{% endif %}>ูุนุทู</option>
                <option value="EXPENSE" {% if budget_settings.commitment_mode == 'EXPENSE' %}selected{% endif %}>ุงููููุงุช ููุท</option>
                <option value="PURCHASE" {% if budget_settings.commitment_mode == 'PURCHASE' %}selected{% endif %}>ุทูุจุงุช ุงูุดุฑุงุก ููุท</option>
                <option value="QUOTE" {% if budget_settings.commitment_mode == 'QUOTE' %}selected{% endif %}>ุนุฑูุถ ุงูุฃุณุนุงุฑ ุงูููุจููุฉ</option>
                <option value="ALL" {% if budget_settings.commitment_mode == 'ALL' %}selected{% endif %}>ุงูุฌููุน</option>
              </select>
            </div>

            <div class="mb-3">
              <div class="form-check form-switch">
                <input type="checkbox" name="enable_budget_alerts" class="form-check-input" id="enable_alerts" 
                       {% if budget_settings.enable_budget_alerts %}checked{% endif %}>
                <label class="form-check-label" for="enable_alerts">ุชูุนูู ุงูุชูุจููุงุช</label>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">ุนุชุจุฉ ุงูุชุญุฐูุฑ (%)</label>
                <input type="number" name="budget_threshold_warning" class="form-control" 
                       value="{{ budget_settings.budget_threshold_warning }}" min="0" max="100" step="1">
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">ุนุชุจุฉ ุงูุฎุทุฑ (%)</label>
                <input type="number" name="budget_threshold_critical" class="form-control" 
                       value="{{ budget_settings.budget_threshold_critical }}" min="0" max="100" step="1">
              </div>
            </div>

            <div class="mb-3">
              <div class="form-check form-switch">
                <input type="checkbox" name="enable_budget_blocking" class="form-check-input" id="enable_blocking" 
                       {% if budget_settings.enable_budget_blocking %}checked{% endif %}>
                <label class="form-check-label" for="enable_blocking">ููุน ุชุฌุงูุฒ ุงูููุฒุงููุฉ</label>
              </div>
              <small class="text-muted">ููุน ุฅูุดุงุก ูููุงุช ุชุชุฌุงูุฒ ุงูููุฒุงููุฉ ุงููุชุงุญุฉ</small>
            </div>

            <div class="alert alert-light border">
              <strong>ุงูุฅุญุตุงุฆูุงุช:</strong><br>
              <span class="badge bg-secondary">{{ budget_stats.total_budgets }}</span> ููุฒุงููุฉ ุฅุฌูุงูู
              <span class="badge bg-success">{{ budget_stats.active_budgets }}</span> ูุดุทุฉ
              <span class="badge bg-info">{{ budget_stats.current_year_budgets }}</span> ุงูุณูุฉ ุงูุญุงููุฉ
            </div>

            <button type="submit" class="btn btn-primary w-100">
              <i class="fas fa-save"></i> ุญูุธ ุฅุนุฏุงุฏุงุช ุงูููุฒุงููุฉ
            </button>
          </form>
        </div>
      </div>
    </div>

    <div class="col-lg-6">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-header bg-success text-white">
          <h5 class="mb-0"><i class="fas fa-building"></i> ูุญุฏุฉ ุงูุฃุตูู ุงูุซุงุจุชุฉ</h5>
        </div>
        <div class="card-body">
          <form method="POST">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <input type="hidden" name="action" value="save_asset_settings">
            
            <div class="mb-3">
              <div class="form-check form-switch">
                <input type="checkbox" name="enable_fixed_assets" class="form-check-input" id="enable_assets" 
                       {% if asset_settings.enable_fixed_assets %}checked{% endif %}>
                <label class="form-check-label" for="enable_assets">
                  <strong>ุชูุนูู ูุญุฏุฉ ุงูุฃุตูู ุงูุซุงุจุชุฉ</strong>
                </label>
              </div>
              <small class="text-muted">ุฅุฏุงุฑุฉ ุงูุฃุตูู ูุงูุงุณุชููุงู ูุงูุตูุงูุฉ</small>
            </div>

            <hr>

            <div class="mb-3">
              <div class="form-check form-switch">
                <input type="checkbox" name="enable_auto_depreciation" class="form-check-input" id="enable_depreciation" 
                       {% if asset_settings.enable_auto_depreciation %}checked{% endif %}>
                <label class="form-check-label" for="enable_depreciation">ุชูุนูู ุงูุงุณุชููุงู ุงูุชููุงุฆู</label>
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">ุชูุฑุงุฑ ุงูุงุณุชููุงู</label>
              <select name="depreciation_frequency" class="custom-select">
                <option value="MONTHLY" {% if asset_settings.depreciation_frequency == 'MONTHLY' %}selected{% endif %}>ุดูุฑู</option>
                <option value="QUARTERLY" {% if asset_settings.depreciation_frequency == 'QUARTERLY' %}selected{% endif %}>ุฑุจุน ุณููู</option>
                <option value="YEARLY" {% if asset_settings.depreciation_frequency == 'YEARLY' %}selected{% endif %}>ุณููู</option>
              </select>
            </div>

            <div class="mb-3">
              <label class="form-label">ููู ุงุญุชุณุงุจ ุงูุงุณุชููุงู (ูู ุงูุดูุฑ)</label>
              <input type="number" name="depreciation_day_of_month" class="form-control" 
                     value="{{ asset_settings.depreciation_day_of_month }}" min="1" max="28" step="1">
            </div>

            <hr>

            <div class="mb-3">
              <div class="form-check form-switch">
                <input type="checkbox" name="auto_create_asset_from_expense" class="form-check-input" id="auto_asset" 
                       {% if asset_settings.auto_create_asset_from_expense %}checked{% endif %}>
                <label class="form-check-label" for="auto_asset">ุชุญููู ุงููููุงุช ุงููุจูุฑุฉ ูุฃุตูู ุชููุงุฆูุงู</label>
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">ุญุฏ ุงูุฑุณููุฉ (โช)</label>
              <input type="number" name="asset_capitalization_threshold" class="form-control" 
                     value="{{ asset_settings.asset_capitalization_threshold }}" min="0" step="100">
              <small class="text-muted">ุงููููุงุช ุงูุฃูุจุฑ ูู ูุฐุง ุงููุจูุบ ุชุชุญูู ูุฃุตูู ุซุงุจุชุฉ</small>
            </div>

            <div class="alert alert-light border">
              <strong>ุงูุฅุญุตุงุฆูุงุช:</strong><br>
              <span class="badge bg-secondary">{{ asset_stats.total_assets }}</span> ุฃุตู ุฅุฌูุงูู
              <span class="badge bg-success">{{ asset_stats.active_assets }}</span> ูุดุท
              <span class="badge bg-info">{{ asset_stats.total_categories }}</span> ูุฆุฉ
            </div>

            <button type="submit" class="btn btn-success w-100">
              <i class="fas fa-save"></i> ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุฃุตูู ุงูุซุงุจุชุฉ
            </button>
          </form>
        </div>
      </div>
    </div>

  </div>

  <div class="row mt-4">
    <div class="col-12">
      <div class="card border-0 shadow-sm">
        <div class="card-header bg-dark text-white">
          <h5 class="mb-0"><i class="fas fa-link"></i> ุฑูุงุจุท ุณุฑูุนุฉ</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-3">
              <a href="#" class="btn btn-outline-primary w-100 mb-2">
                <i class="fas fa-chart-bar"></i> ููุญุฉ ุงูููุฒุงููุฉ
              </a>
            </div>
            <div class="col-md-3">
              <a href="#" class="btn btn-outline-primary w-100 mb-2">
                <i class="fas fa-file-invoice"></i> ุชูุงุฑูุฑ ุงูููุฒุงููุฉ
              </a>
            </div>
            <div class="col-md-3">
              <a href="#" class="btn btn-outline-success w-100 mb-2">
                <i class="fas fa-warehouse"></i> ุณุฌู ุงูุฃุตูู
              </a>
            </div>
            <div class="col-md-3">
              <a href="#" class="btn btn-outline-success w-100 mb-2">
                <i class="fas fa-tools"></i> ุตูุงูุฉ ุงูุฃุตูู
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock %}

