{% extends 'base.html' %}
{% block title %}┘Е╪п┘К╪▒ ╪з┘Д┘Ж╪│╪о ╪з┘Д╪з╪н╪к┘К╪з╪╖┘К╪й{% endblock %}
{% block page_title %}ЁЯТ╛ ┘Е╪п┘К╪▒ ╪з┘Д┘Ж╪│╪о ╪з┘Д╪з╪н╪к┘К╪з╪╖┘К╪й ╪з┘Д┘Е╪к┘В╪п┘Е - Backup & DB Converter{% endblock %}

{% block head_extra %}
{{ super() }}
<style>
.db-card {
  transition: all 0.3s ease;
  cursor: pointer;
}
.db-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}
.db-card.active {
  border: 3px solid #28a745;
  background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
}
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
  
  {% include 'advanced/_navigation.html' %}
  
  <div class="alert border-0 shadow-sm" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
    <h5><i class="fas fa-database"></i> <strong>┘Е╪п┘К╪▒ ╪з┘Д┘Ж╪│╪о ╪з┘Д┘Е╪к┘В╪п┘Е</strong></h5>
    <p class="mb-0">┘Ж╪│╪о ╪з╪н╪к┘К╪з╪╖┘К + ╪к╪н┘И┘К┘Д ┘В┘И╪з╪╣╪п ╪з┘Д╪и┘К╪з┘Ж╪з╪к + ╪м╪п┘И┘Д╪й ╪к┘Д┘В╪з╪ж┘К╪й</p>
  </div>

  <ul class="nav nav-tabs mb-4" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" data-bs-toggle="tab" href="#backups">
        <i class="fas fa-save"></i> ╪з┘Д┘Ж╪│╪о ╪з┘Д╪з╪н╪к┘К╪з╪╖┘К╪й
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-bs-toggle="tab" href="#schedule">
        <i class="fas fa-clock"></i> ╪з┘Д╪м╪п┘И┘Д╪й ╪з┘Д╪к┘Д┘В╪з╪ж┘К╪й
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-bs-toggle="tab" href="#convert">
        <i class="fas fa-exchange-alt"></i> ╪к╪н┘И┘К┘Д ┘В╪з╪╣╪п╪й ╪з┘Д╪и┘К╪з┘Ж╪з╪к
      </a>
    </li>
  </ul>

  <div class="tab-content">
    <div id="backups" class="tab-pane fade show active">
      <div class="row">
        <div class="col-md-4">
          <div class="card border-0 shadow-sm">
            <div class="card-header bg-gradient-success text-white">
              <h5 class="mb-0"><i class="fas fa-plus"></i> ┘Ж╪│╪о╪й ╪з╪н╪к┘К╪з╪╖┘К╪й ╪м╪п┘К╪п╪й</h5>
            </div>
            <div class="card-body">
              <form method="POST">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <input type="hidden" name="action" value="create_backup">
                
                <div class="mb-3">
                  <label class="form-label fw-bold">╪з╪│┘Е ╪з┘Д┘Ж╪│╪о╪й (╪з╪о╪к┘К╪з╪▒┘К)</label>
                  <input type="text" name="backup_name" class="form-control" 
                         placeholder="backup_2025_01_13">
                  <small class="text-muted">╪е╪░╪з ╪к╪▒┘Г╪к┘З ┘Б╪з╪▒╪║╪з┘Л ╪│┘К╪к┘Е ╪з┘Д╪к╪│┘Е┘К╪й ╪к┘Д┘В╪з╪ж┘К╪з┘Л</small>
                </div>
                
                <div class="alert alert-info small">
                  <i class="fas fa-info-circle"></i> <strong>┘Ж┘И╪╣ ┘В╪з╪╣╪п╪й ╪з┘Д╪и┘К╪з┘Ж╪з╪к ╪з┘Д╪н╪з┘Д┘К╪й:</strong>
                  <br><span class="badge bg-primary">{{ current_db_type }}</span>
                </div>
                
                <button type="submit" class="btn btn-success w-100 btn-lg">
                  <i class="fas fa-save"></i> ╪е┘Ж╪┤╪з╪б ┘Ж╪│╪о╪й ╪з╪н╪к┘К╪з╪╖┘К╪й ╪з┘Д╪в┘Ж
                </button>
              </form>
            </div>
          </div>
        </div>

        <div class="col-md-8">
          <div class="card border-0 shadow-sm">
            <div class="card-header bg-gradient-primary text-white">
              <h5 class="mb-0"><i class="fas fa-history"></i> ╪з┘Д┘Ж╪│╪о ╪з┘Д╪з╪н╪к┘К╪з╪╖┘К╪й ({{ backups|length }})</h5>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-hover">
                  <thead class="table-light">
                    <tr>
                      <th>╪з┘Д╪з╪│┘Е</th>
                      <th>╪з┘Д╪н╪м┘Е</th>
                      <th>╪з┘Д╪к╪з╪▒┘К╪о</th>
                      <th>╪з┘Д╪е╪м╪▒╪з╪б╪з╪к</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for backup in backups %}
                    <tr>
                      <td><code>{{ backup.name }}</code></td>
                      <td><span class="badge bg-info">{{ backup.size }}</span></td>
                      <td>{{ backup.date }}</td>
                  <td>
                    <form method="POST" action="{{ url_for('advanced.restore_backup', filename=backup.name) }}" style="display:inline;" onsubmit="return confirm('тЪая╕П ┘З┘Д ╪г┘Ж╪к ┘Е╪к╪г┘Г╪п ┘Е┘Ж ╪з╪│╪к╪╣╪з╪п╪й ┘З╪░┘З ╪з┘Д┘Ж╪│╪о╪й╪Я\n\n╪│┘К╪к┘Е ╪з╪│╪к╪и╪п╪з┘Д ╪з┘Д╪и┘К╪з┘Ж╪з╪к ╪з┘Д╪н╪з┘Д┘К╪й!\n\n╪│┘К╪к┘Е ╪н┘Б╪╕ ┘Ж╪│╪о╪й ╪г┘Е╪з┘Ж ╪к┘Д┘В╪з╪ж┘К╪з┘Л.');">
                      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                      <button type="submit" class="btn btn-sm btn-success">
                        <i class="fas fa-undo"></i> ╪з╪│╪к╪╣╪з╪п╪й
                      </button>
                    </form>
                    
                    <a href="{{ url_for('advanced.download_backup', filename=backup.name) }}" class="btn btn-sm btn-primary">
                      <i class="fas fa-download"></i> ╪к╪н┘Е┘К┘Д
                    </a>
                    
                    <form method="POST" action="{{ url_for('advanced.delete_backup', filename=backup.name) }}" style="display:inline;" onsubmit="return confirm('тЪая╕П ┘З┘Д ╪г┘Ж╪к ┘Е╪к╪г┘Г╪п ┘Е┘Ж ╪н╪░┘Б ┘З╪░┘З ╪з┘Д┘Ж╪│╪о╪й╪Я\n\n┘Д╪з ┘К┘Е┘Г┘Ж ╪з┘Д╪к╪▒╪з╪м╪╣ ╪╣┘Ж ┘З╪░╪з ╪з┘Д╪е╪м╪▒╪з╪б!');">
                      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                      <button type="submit" class="btn btn-sm btn-danger">
                        <i class="fas fa-trash"></i> ╪н╪░┘Б
                      </button>
                    </form>
                  </td>
                    </tr>
                    {% else %}
                    <tr>
                      <td colspan="4" class="text-center text-muted">┘Д╪з ╪к┘И╪м╪п ┘Ж╪│╪о ╪з╪н╪к┘К╪з╪╖┘К╪й</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="schedule" class="tab-pane fade">
      <div class="row">
        <div class="col-md-6 mx-auto">
          <div class="card border-0 shadow-lg">
            <div class="card-header" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
              <h5 class="mb-0"><i class="fas fa-clock"></i> ╪м╪п┘И┘Д╪й ╪з┘Д┘Ж╪│╪о ╪з┘Д╪з╪н╪к┘К╪з╪╖┘К ╪з┘Д╪к┘Д┘В╪з╪ж┘К</h5>
            </div>
            <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            {% if auto_backup_enabled %}
            <div class="alert alert-success mb-0 flex-grow-1 me-2">
              <i class="fas fa-check-circle"></i> <strong>┘Е┘Б╪╣┘С┘Д!</strong> ╪з┘Д┘Ж╪│╪о ╪з┘Д╪к┘Д┘В╪з╪ж┘К ┘К╪╣┘Е┘Д
              <br><small>╪з┘Д┘Ж┘И╪╣: {{ schedule_info.type or '┘К┘И┘Е┘К' }} - ╪з┘Д┘И┘В╪к: {{ schedule_info.time or '03:00' }}</small>
            </div>
            {% else %}
            <div class="alert alert-warning mb-0 flex-grow-1 me-2">
              <i class="fas fa-exclamation-triangle"></i> ╪з┘Д┘Ж╪│╪о ╪з┘Д╪к┘Д┘В╪з╪ж┘К ╪║┘К╪▒ ┘Е┘Б╪╣┘С┘Д
            </div>
            {% endif %}
            
            <form method="POST" action="{{ url_for('advanced.toggle_auto_backup') }}">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
              <button type="submit" class="btn btn-{% if auto_backup_enabled %}warning{% else %}success{% endif %}">
                <i class="fas fa-power-off"></i> {% if auto_backup_enabled %}╪к╪╣╪╖┘К┘Д{% else %}╪к┘Б╪╣┘К┘Д{% endif %}
              </button>
            </form>
          </div>
              
              <form method="POST">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <input type="hidden" name="action" value="schedule_backup">
                
                <div class="mb-4">
                  <label class="form-label fw-bold">┘Ж┘И╪╣ ╪з┘Д╪м╪п┘И┘Д╪й</label>
                  <select name="schedule_type" class="form-select" required>
                    <option value="hourly" {% if schedule_info.type == 'hourly' %}selected{% endif %}>┘Г┘Д ╪│╪з╪╣╪й</option>
                    <option value="daily" {% if schedule_info.type == 'daily' or not schedule_info.type %}selected{% endif %}>┘К┘И┘Е┘К╪з┘Л</option>
                    <option value="weekly" {% if schedule_info.type == 'weekly' %}selected{% endif %}>╪г╪│╪и┘И╪╣┘К╪з┘Л</option>
                    <option value="monthly" {% if schedule_info.type == 'monthly' %}selected{% endif %}>╪┤┘З╪▒┘К╪з┘Л</option>
                  </select>
                </div>
                
                <div class="mb-4">
                  <label class="form-label fw-bold">╪з┘Д┘И┘В╪к</label>
                  <input type="time" name="schedule_time" class="form-control" 
                         value="{{ schedule_info.time or '03:00' }}" required>
                  <small class="text-muted">╪з┘Д┘И┘В╪к ╪з┘Д┘Е┘Б╪╢┘Д ┘Д╪е┘Ж╪┤╪з╪б ╪з┘Д┘Ж╪│╪о╪й ╪з┘Д╪з╪н╪к┘К╪з╪╖┘К╪й</small>
                </div>
                
                <div class="alert alert-info small">
                  <i class="fas fa-lightbulb"></i> <strong>┘Ж╪╡┘К╪н╪й:</strong> ┘К┘П┘Б╪╢┘Д ╪м╪п┘И┘Д╪й ╪з┘Д┘Ж╪│╪о ┘Б┘К ┘И┘В╪к ┘В┘Д┘К┘Д ╪з┘Д╪з╪│╪к╪о╪п╪з┘Е (┘Е╪л┘Д ╪з┘Д╪│╪з╪╣╪й 3 ╪╡╪и╪з╪н╪з┘Л)
                </div>
                
                <button type="submit" class="btn btn-lg w-100" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
                  <i class="fas fa-check"></i> ╪к┘Б╪╣┘К┘Д ╪з┘Д╪м╪п┘И┘Д╪й
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="convert" class="tab-pane fade">
      <div class="alert alert-warning border-0 shadow-sm">
        <i class="fas fa-exclamation-triangle"></i> <strong>╪к╪н╪░┘К╪▒:</strong> ╪к╪н┘И┘К┘Д ┘В╪з╪╣╪п╪й ╪з┘Д╪и┘К╪з┘Ж╪з╪к ╪╣┘Е┘Д┘К╪й ╪н╪│╪з╪│╪й! ╪з╪н┘Б╪╕ ┘Ж╪│╪о╪й ╪з╪н╪к┘К╪з╪╖┘К╪й ╪г┘И┘Д╪з┘Л
      </div>

      <div class="row mb-4">
        <div class="col-md-12">
          <div class="card border-0 shadow-sm bg-light">
            <div class="card-body">
              <h6 class="fw-bold mb-3">┘В╪з╪╣╪п╪й ╪з┘Д╪и┘К╪з┘Ж╪з╪к ╪з┘Д╪н╪з┘Д┘К╪й:</h6>
              <div class="d-flex align-items-center gap-3">
                <div class="p-3 rounded bg-success bg-opacity-10">
                  <i class="fas fa-database fa-3x text-success"></i>
                </div>
                <div>
                  <h4 class="mb-0">{{ current_db_type }}</h4>
                  <small class="text-muted">╪з┘Д┘Ж┘И╪╣ ╪з┘Д╪н╪з┘Д┘К</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row g-3 mb-4">
        <div class="col-md-3">
          <div class="db-card card border-0 shadow-sm h-100 text-center" onclick="selectDB(this, 'sqlite')">
            <div class="card-body">
              <i class="fas fa-database fa-3x text-primary mb-3"></i>
              <h6>SQLite</h6>
              <small class="text-muted">┘Е┘Д┘Б ┘Е╪н┘Д┘К - ╪│╪▒┘К╪╣</small>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="db-card card border-0 shadow-sm h-100 text-center" onclick="selectDB(this, 'postgresql')">
            <div class="card-body">
              <i class="fas fa-server fa-3x text-info mb-3"></i>
              <h6>PostgreSQL</h6>
              <small class="text-muted">┘В┘И┘К - ╪з╪н╪к╪▒╪з┘Б┘К</small>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="db-card card border-0 shadow-sm h-100 text-center" onclick="selectDB(this, 'mysql')">
            <div class="card-body">
              <i class="fas fa-database fa-3x text-warning mb-3"></i>
              <h6>MySQL</h6>
              <small class="text-muted">╪┤╪з╪ж╪╣ - ┘Е┘И╪л┘И┘В</small>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="db-card card border-0 shadow-sm h-100 text-center" onclick="selectDB(this, 'mssql')">
            <div class="card-body">
              <i class="fas fa-server fa-3x text-danger mb-3"></i>
              <h6>SQL Server</h6>
              <small class="text-muted">Microsoft</small>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-8 mx-auto">
          <div class="card border-0 shadow-lg">
            <div class="card-header" style="background: linear-gradient(135deg, #4776E6 0%, #8E54E9 100%); color: white;">
              <h5 class="mb-0"><i class="fas fa-exchange-alt"></i> ╪к╪н┘И┘К┘Д ┘В╪з╪╣╪п╪й ╪з┘Д╪и┘К╪з┘Ж╪з╪к</h5>
            </div>
            <div class="card-body">
              <form method="POST" id="convertForm">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <input type="hidden" name="action" value="convert_database">
                <input type="hidden" name="target_db" id="target_db" value="">
                
                <div class="mb-4">
                  <label class="form-label fw-bold">┘Ж┘И╪╣ ┘В╪з╪╣╪п╪й ╪з┘Д╪и┘К╪з┘Ж╪з╪к ╪з┘Д┘Е╪│╪к┘З╪п┘Б╪й</label>
                  <select class="form-select" id="db_type_select" onchange="updateConnectionString()" required>
                    <option value="">-- ╪з╪о╪к╪▒ ╪з┘Д┘Ж┘И╪╣ --</option>
                    <option value="sqlite">SQLite</option>
                    <option value="postgresql">PostgreSQL</option>
                    <option value="mysql">MySQL</option>
                    <option value="mssql">SQL Server</option>
                  </select>
                </div>
                
                <div class="mb-4">
                  <label class="form-label fw-bold">Connection String</label>
                  <textarea name="connection_string" id="connection_string" class="form-control" rows="3" 
                            placeholder="┘Е╪л╪з┘Д: postgresql://user:password@localhost/dbname" required></textarea>
                  <small class="text-muted" id="connection_hint"></small>
                  
                  <button type="button" class="btn btn-sm btn-info mt-2" onclick="testConnection()">
                    <i class="fas fa-plug"></i> ╪з╪о╪к╪и╪з╪▒ ╪з┘Д╪з╪к╪╡╪з┘Д
                  </button>
                  <span id="connection_status" class="ms-2"></span>
                </div>
                
                <div id="connection_examples" class="alert alert-light small" style="display:none;">
                  <strong>╪г┘Е╪л┘Д╪й:</strong>
                  <div id="example_text"></div>
                </div>
                
                <div class="alert alert-danger">
                  <i class="fas fa-exclamation-circle"></i> <strong>╪к╪г┘Г┘К╪п:</strong>
                  <ul class="mb-0 mt-2">
                    <li>╪к╪г┘Г╪п ┘Е┘Ж ╪г┘Ж ┘В╪з╪╣╪п╪й ╪з┘Д╪и┘К╪з┘Ж╪з╪к ╪з┘Д┘Е╪│╪к┘З╪п┘Б╪й ┘Е┘И╪м┘И╪п╪й</li>
                    <li>╪к╪г┘Г╪п ┘Е┘Ж ╪╡╪н╪й ╪и┘К╪з┘Ж╪з╪к ╪з┘Д╪з╪к╪╡╪з┘Д</li>
                    <li>╪з╪н┘Б╪╕ ┘Ж╪│╪о╪й ╪з╪н╪к┘К╪з╪╖┘К╪й ┘В╪и┘Д ╪з┘Д╪к╪н┘И┘К┘Д</li>
                    <li>┘В╪п ╪к╪│╪к╪║╪▒┘В ╪з┘Д╪╣┘Е┘Д┘К╪й ┘И┘В╪к╪з┘Л ╪╖┘И┘К┘Д╪з┘Л</li>
                  </ul>
                </div>
                
                <button type="submit" class="btn btn-lg w-100" style="background: linear-gradient(135deg, #FA8BFF 0%, #2BD2FF 50%, #2BFF88 100%); color: white;">
                  <i class="fas fa-exchange-alt"></i> ╪и╪п╪б ╪з┘Д╪к╪н┘И┘К┘Д ╪з┘Д╪в┘Ж
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<script>
function selectDB(card, type) {
  document.querySelectorAll('.db-card').forEach(c => c.classList.remove('active'));
  card.classList.add('active');
  document.getElementById('db_type_select').value = type;
  document.getElementById('target_db').value = type;
  updateConnectionString();
}

function updateConnectionString() {
  const type = document.getElementById('db_type_select').value;
  const connString = document.getElementById('connection_string');
  const hint = document.getElementById('connection_hint');
  const examples = document.getElementById('connection_examples');
  const exampleText = document.getElementById('example_text');
  
  document.getElementById('target_db').value = type;
  
  if (type === 'sqlite') {
    connString.value = 'sqlite:///instance/app_new.db';
    hint.textContent = '┘Е╪│╪з╪▒ ╪з┘Д┘Е┘Д┘Б ╪з┘Д┘Е╪н┘Д┘К';
    exampleText.innerHTML = '<code>sqlite:///instance/app_new.db</code>';
    examples.style.display = 'block';
  } else if (type === 'postgresql') {
    connString.value = 'postgresql://user:password@localhost:5432/dbname';
    hint.textContent = '╪з┘Д┘Е╪│╪к╪о╪п┘Е:┘Г┘Д┘Е╪й ╪з┘Д┘Е╪▒┘И╪▒@╪з┘Д╪│┘К╪▒┘Б╪▒:╪з┘Д┘Е┘Ж┘Б╪░/╪з╪│┘Е ┘В╪з╪╣╪п╪й ╪з┘Д╪и┘К╪з┘Ж╪з╪к';
    exampleText.innerHTML = '<code>postgresql://azad:123456@localhost:5432/garage_db</code>';
    examples.style.display = 'block';
  } else if (type === 'mysql') {
    connString.value = 'mysql+pymysql://user:password@localhost:3306/dbname';
    hint.textContent = '╪з┘Д┘Е╪│╪к╪о╪п┘Е:┘Г┘Д┘Е╪й ╪з┘Д┘Е╪▒┘И╪▒@╪з┘Д╪│┘К╪▒┘Б╪▒:╪з┘Д┘Е┘Ж┘Б╪░/╪з╪│┘Е ┘В╪з╪╣╪п╪й ╪з┘Д╪и┘К╪з┘Ж╪з╪к';
    exampleText.innerHTML = '<code>mysql+pymysql://root:123456@localhost:3306/garage_db</code>';
    examples.style.display = 'block';
  } else if (type === 'mssql') {
    connString.value = 'mssql+pyodbc://user:password@localhost/dbname?driver=ODBC+Driver+17+for+SQL+Server';
    hint.textContent = '╪з┘Д┘Е╪│╪к╪о╪п┘Е:┘Г┘Д┘Е╪й ╪з┘Д┘Е╪▒┘И╪▒@╪з┘Д╪│┘К╪▒┘Б╪▒/╪з╪│┘Е ┘В╪з╪╣╪п╪й ╪з┘Д╪и┘К╪з┘Ж╪з╪к';
    exampleText.innerHTML = '<code>mssql+pyodbc://sa:Pass123@localhost/garage_db?driver=ODBC+Driver+17+for+SQL+Server</code>';
    examples.style.display = 'block';
  } else {
    connString.value = '';
    hint.textContent = '';
    examples.style.display = 'none';
  }
}

function testConnection() {
  const connString = document.getElementById('connection_string').value;
  const statusSpan = document.getElementById('connection_status');
  
  if (!connString) {
    statusSpan.innerHTML = '<span class="badge bg-danger">╪г╪п╪о┘Д Connection String ╪г┘И┘Д╪з┘Л</span>';
    return;
  }
  
  statusSpan.innerHTML = '<span class="badge bg-warning"><i class="fas fa-spinner fa-spin"></i> ╪м╪з╪▒┘К ╪з┘Д╪з╪о╪к╪и╪з╪▒...</span>';
  
  fetch('/advanced/test-db-connection', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded',
      'X-CSRFToken': document.querySelector('[name="csrf_token"]').value
    },
    body: 'connection_string=' + encodeURIComponent(connString)
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      statusSpan.innerHTML = '<span class="badge bg-success"><i class="fas fa-check"></i> ' + data.message + '</span>';
    } else {
      statusSpan.innerHTML = '<span class="badge bg-danger"><i class="fas fa-times"></i> ' + data.message + '</span>';
    }
  })
  .catch(error => {
    statusSpan.innerHTML = '<span class="badge bg-danger"><i class="fas fa-times"></i> ╪о╪╖╪г ┘Б┘К ╪з┘Д╪з╪к╪╡╪з┘Д</span>';
  });
}
</script>
{% endblock %}
