{% extends "base.html" %}
{% block title %}ุงุณุชุนุงุฏุฉ ุงูุฃุฑุดูู{% endblock %}
{% block page_header %}๐ ุงุณุชุนุงุฏุฉ ุงูุฃุฑุดูู #{{ archive.id }}{% endblock %}

{% block content %}
<div class="container my-4">
  
  <div class="alert alert-info border-0 shadow-sm mb-4">
    <i class="fas fa-info-circle"></i>
    <strong>ูุนูููุงุช ุงูุงุณุชุนุงุฏุฉ:</strong> ุณูุชู ุงุณุชุนุงุฏุฉ ุงูุณุฌู ุงููุคุฑุดู ุฅูู ุงูุฌุฏูู ุงูุฃุตูู ูุญุฐู ุงูุฃุฑุดูู. 
    ุชุฃูุฏ ูู ุตุญุฉ ุงูุจูุงูุงุช ูุจู ุงูุงุณุชุนุงุฏุฉ.
  </div>

  <!-- ูุนูููุงุช ุงูุฃุฑุดูู -->
  <div class="card border-0 shadow-lg mb-4">
    <div class="card-header bg-gradient-success text-white">
      <h5 class="mb-0"><i class="fas fa-archive"></i> ูุนูููุงุช ุงูุฃุฑุดูู ุงููุฑุงุฏ ุงุณุชุนุงุฏุชู</h5>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <table class="table table-borderless">
            <tr>
              <th>ููุน ุงูุณุฌู:</th>
              <td>
                {% if archive.record_type == 'service_requests' %}
                <span class="badge bg-primary"><i class="fas fa-tools"></i> ุทูุจ ุตูุงูุฉ</span>
                {% elif archive.record_type == 'payments' %}
                <span class="badge bg-success"><i class="fas fa-credit-card"></i> ุฏูุนุฉ</span>
                {% elif archive.record_type == 'sales' %}
                <span class="badge bg-info"><i class="fas fa-shopping-cart"></i> ูุจูุนุฉ</span>
                {% elif archive.record_type == 'expenses' %}
                <span class="badge bg-warning"><i class="fas fa-receipt"></i> ูููุฉ</span>
                {% elif archive.record_type == 'checks' %}
                <span class="badge bg-danger"><i class="fas fa-money-check"></i> ุดูู</span>
                {% else %}
                <span class="badge bg-secondary">{{ archive.record_type }}</span>
                {% endif %}
              </td>
            </tr>
            <tr>
              <th>ูุนุฑู ุงูุณุฌู:</th>
              <td><strong>#{{ archive.record_id }}</strong></td>
            </tr>
            <tr>
              <th>ุชุงุฑูุฎ ุงูุฃุฑุดูุฉ:</th>
              <td>{{ archive.archived_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
            </tr>
          </table>
        </div>
        <div class="col-md-6">
          <table class="table table-borderless">
            <tr>
              <th>ุฃุฑุดูุฉ ุจูุงุณุทุฉ:</th>
              <td>{{ archive.user.username if archive.user else 'ุบูุฑ ูุนุฑูู' }}</td>
            </tr>
            <tr>
              <th>ุณุจุจ ุงูุฃุฑุดูุฉ:</th>
              <td>{{ archive.archive_reason or 'ุจุฏูู ุณุจุจ' }}</td>
            </tr>
            <tr>
              <th>ุชุงุฑูุฎ ุงูุฅูุดุงุก ุงูุฃุตูู:</th>
              <td>{{ archive.original_created_at.strftime('%Y-%m-%d %H:%M:%S') if archive.original_created_at else 'ุบูุฑ ูุญุฏุฏ' }}</td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- ูููุฐุฌ ุงูุงุณุชุนุงุฏุฉ -->
  <div class="card border-0 shadow-lg">
    <div class="card-header bg-gradient-warning text-dark">
      <h5 class="mb-0"><i class="fas fa-undo"></i> ูููุฐุฌ ุงุณุชุนุงุฏุฉ ุงูุณุฌู</h5>
    </div>
    <div class="card-body">
      <form method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        
        <div class="row g-3">
          <div class="col-md-12">
            <label for="reason" class="form-label fw-bold">ุณุจุจ ุงูุงุณุชุนุงุฏุฉ</label>
            <textarea name="reason" id="reason" class="form-control" rows="3" required placeholder="ุฃุฏุฎู ุณุจุจ ุงุณุชุนุงุฏุฉ ูุฐุง ุงูุณุฌู"></textarea>
            <div class="form-text">ุฃุฏุฎู ุณุจุจ ุงุณุชุนุงุฏุฉ ูุฐุง ุงูุณุฌู</div>
          </div>
          
          <div class="col-12">
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              <button type="submit" class="btn btn-success fw-bold" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุงุณุชุนุงุฏุฉ ูุฐุง ุงูุณุฌูุ')">
                <i class="fas fa-undo"></i> ุงุณุชุนุงุฏุฉ ุงูุณุฌู
              </button>
              <a href="{{ url_for('archive.view_archive', archive_id=archive.id) }}" class="btn btn-outline-secondary">
                <i class="fas fa-times"></i> ุฅูุบุงุก
              </a>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- ุชุญุฐูุฑุงุช -->
  <div class="row g-3 mt-4">
    <div class="col-md-6">
      <div class="card border-warning">
        <div class="card-body">
          <h6 class="text-warning"><i class="fas fa-exclamation-triangle"></i> ุชุญุฐูุฑุงุช ูููุฉ</h6>
          <ul class="mb-0">
            <li>ุณูุชู ุญุฐู ุงูุฃุฑุดูู ููุงุฆูุงู</li>
            <li>ุงูุณุฌู ุณูุธูุฑ ูู ุงูุฌุฏูู ุงูุฃุตูู</li>
            <li>ูุฏ ูุชุบูุฑ ูุนุฑู ุงูุณุฌู ุงูุฌุฏูุฏ</li>
            <li>ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุชุนุงุฑุถุงุช</li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="col-md-6">
      <div class="card border-info">
        <div class="card-body">
          <h6 class="text-info"><i class="fas fa-info-circle"></i> ูุนูููุงุช ุฅุถุงููุฉ</h6>
          <ul class="mb-0">
            <li>ุงูุจูุงูุงุช ูุญููุธุฉ ุจุฃูุงู</li>
            <li>ูููู ุงุณุชุนุงุฏุฉ ุงูุณุฌู ูุฑุฉ ุฃุฎุฑู</li>
            <li>ุงูุชูุงุฑูุฎ ุงูุฃุตููุฉ ูุญููุธุฉ</li>
            <li>ุณุฌู ุงูุงุณุชุนุงุฏุฉ ุณููุญูุธ</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock %}

